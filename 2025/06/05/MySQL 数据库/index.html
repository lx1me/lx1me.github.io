<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Hexo | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Hexo"><meta name="application-name" content="Hexo"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Hexo"><meta property="og:url" content="https://lx1me.github.io/2025/06/05/MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93/index.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="MySQL 数据库 title: MySQL 数据库date: 2025-06-05 12:00:00categories: [数据库]tags: [MySQL, 数据分类]description: MySQL 数据库中数据的分类概述与示例数据的分类123结构化数据结构化数据一般是指可以用二维表来逻"><meta property="og:locale" content="en"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="John Doe"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="MySQL 数据库 title: MySQL 数据库date: 2025-06-05 12:00:00categories: [数据库]tags: [MySQL, 数据分类]description: MySQL 数据库中数据的分类概述与示例数据的分类123结构化数据结构化数据一般是指可以用二维表来逻"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://lx1me.github.io/2025/06/05/MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"Author: John Doe","link":"Link: ","source":"Source: Hexo","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Hexo',
  title: 'Hexo',
  postAI: '',
  pageFillDescription: 'MySQL 数据库, title MySQL 数据库date 2025-06-05 120000categories [数据库]tags [MySQL 数据分类]description MySQL 数据库中数据的分类概述与示例, 数据的分类, ER模型, SQL 结构化查询语言, MySQL 安装和基本使用, MySQL 软件, MySQL 安装方式, mariadb安装方式, MySQL 多实例, 数据库多实例, MySQL 组成和常用工具, MySQL 命令行操作, MySQL****命令行工具, mysql客户端命令, mysqladmin, mysqladmin 只能关闭服务不能启动服务, mysqladmin shutdown, SQL 语言, SQL 语句, 类型简介, 数据类型, 修饰符, 查看表所支持的引擎, 修改表结构, 字段默认值修改, 主键的增删, 查看自增id的起始值, 表的移除, DML 语句, 插入数据, 基于select方式插入数据, 对于NUll的空值条件判断要使用 IS NULL否则会导致失败, 删除数据, 清空表数据, DQL语句, DQL 语句进阶, 存在与否子查询, 联合查询, 交叉连接, 内链接, 自然链接, 外连接, 自连接, SQL注入, SQL高阶语法, 环境变量, 存储过程, 存储过程与自定义函数的区别, 存储过程语法, 流程控制, 触发器, 事件调度器, 事件管理, 用户管理, 密码信息数据库数据库数据库数据分类数据库中数据的分类概述与示例数据的分类结构化数据结构化数据一般是指可以用二维表来逻辑表达实现的数据是有固定的格式和有限长度的数据可以用关系型数据库表示和存储其特点是数据以行为单位一行数据表示一个实体信息每一行数据的属性是相同的存储在数据库中能够用统一的数据类型和结构加以表示也能够用二维表结构来逻辑表达实现包含属性和元组数据库半结构化数据半结构化数据就是介于完全结构化数据和完全无结构的数据之间的数据半结构化数据是结构化数据的一种形式它并不符合关系型数据库或其它数据表的形式关联起来的数据模型结构但包含相关的标记用来分隔语义元素及对记录和字段进行分层数据的结构和内容混在一起没有明显的区分因此这种数据也被称为自描述结构的数据例如文档和一些数据库等就属于半结构化数据数据库非结构化数据就是没有固定结构的数据这种数据没有固定格式和有限长度无法用数据库二维逻辑表来表现其结构对于这类数据我们一般进行整体存储典型的非结构化数据包括二进制文件音视频文件位置信息文件等模型全称为实体联系模型实体关系模型或实体联系模式图它提供不受任何约束的面向用户的表达方法在数据库设计中被广泛用作数据建模的工具一般情况下当我们要设计一个数据库或者数据表的时候只要看到图不管你用的是哪一种关系型数据库软件你都可以将这个数据库和表建出来图模型的组成是由实体属性和联系三部份组成实体实体是数据的使用者代表软件系统中客观存在的生活中的实物同一类实体构成实体集在图中实体用矩形表示属性实体中的所有特性称为属性每个属性描述的是实体的单个特性在图中属性用椭圆形表示联系描述了实体的属性之间的关联规则在图中联系用菱形表示模型范例数据库实体间的联系有三种类型一对一联系例如一个学号只能分配给一个同学每个同学都有一个学号则学号与同学的联系是一对一一对多联系例如一个老师可以教授多门课程每门课程只能有一个老师教授则老师与课程的联系是一对多多对多联系例如一个同学可以报名多门课程每门课程下有多个同学则同学与课程的联系是多对多结构化查询语言结构化查询语言是一种数据库查询和程序设计语言用于存取数据以及查询更新和管理关系数据库系统语句就是用语言写的用于操作数据库的语句工作模式关系型数据库一般工作于模式下使用专有协议进行通信服务端程序监听特有端口客户端程序发送查询语句到服务端服务端将查询结果返回给客户端自带接口接口可以使用第三方工具实现在应用程序或后端开发语言中使用相应的编程语言下的数据库驱动来进行与数据库服务端的通信数据库中的查询语句执行流程数据库接收查询语句用户通过客户端或编程语言框架里面的驱动模块经由专门的通信协议向服务器发送查询语句如果是服务端这里的通信协议端口是数据库服务端内部的连接器接收查询请求后首先到本地的缓存记录中检索信息如果有信息则直接返回查询结果如果没有信息则将信息直接传递给后端的数据库解析器来进行处理词法分析和语法分析服务器首先会对接收到的查询语句进行词法分析将其分解成一系列的词法单元接着进行语法分析检查这些词法单元是否符合语法规则如果语法错误会立即返回错误信息语义分析在语法分析之后会进行语义分析检查查询语句中的表列函数等是否存在以及用户是否有足够的权限执行该查询语义分析还会检查查询语句中的数据类型是否匹配以及是否存在违反数据库完整性的约束查询优化的查询优化器会对查询语句进行优化决定最优的执行查询计划也就是怎么走会效率更快优化过程包括选择最佳的访问路径索引连接顺序等以最小化查询的执行时间和资源消耗优化器还会考虑统计信息如表的行数索引的分布等以做出更明智的决策查询执行优化后的查询计划被传递给执行器进行执行执行器根据查询计划访问存储引擎获取数据存储引擎将文件系统里面的数据库文件数据加载到内存然后在内存中做一次聚合然后临时放到查询缓存中便于下次遇到相同的查询语句重复过来在执行过程中可能会使用缓存来加速查询的执行从开始查询缓存已被移除结果集返回执行器将查询结果集返回给客户端结果集可以包含零行或多行数据具体取决于查询的内容如果查询涉及聚合函数如等或分组操作如执行器还会在返回结果之前对这些数据进行相应的处理错误处理和日志记录如果在执行过程中遇到任何错误如权限不足表不存在等会返回相应的错误信息给客户端同时还会记录查询的执行日志以便进行性能分析和故障排查安装和基本使用软件数据库的特性是基于开源协议发布的可以免费使用也可以基于源码进行二次开发使用标准语言进行管理可以运行于多个系统上具有跨平台特性并且支持多种语言使用插件式存储引擎不同的存储引擎有着不同的功能和特性使用者可以根据需要灵活选择基于单进程多线程的模式进行工作提供了大量的测试组件和诸多的扩展安装方式安装方式多实例数据库多实例拿数据库来说明就是在一台服务器上运行多个服务端进程每个进程监听一个端口维护一套属于其自己的配置和数据客户端使用不同的端口来连接具体服端进程从而实现对不同的实例的操作多实例的优点节约硬件资源在某些场景下比如说测试调研新旧业务并存等需要配置不同的数据库版本而又没有足够多的服务器资源则可以选择在一台服务器上用不同的版本实现多开来满足需求便于对比在一个完全相同的硬件环境中运行不同的版本使用相同的参数进行测试调研时可以最大程度的减少外部环境因素的影响便于得出更准确的结论便于管理在一台服务器上运行多个实例同理只需要在这一台服务器上配置安全规则就可以完成对多个实例的访问授权而且对于数据库的备份停启等工作也只需要在这一台服务器上完成多实例的缺点资源抢占一台服务器上运行多个服务实例资源总量恒定一个实例占用的资源无法被另一个实例所使用在这种情况下服务性能会受到影响无法体现服务的实际性能存在单点风险一台服务器上部署多个服务实例如果该服务器当机则这多个服务实例都会受影响组成和常用工具基于模式提供服务主要有客户端程序和服务端程序组成另外还有一些管理工具命令行操作命令行工具服务基于架构用户主要使用客户端工具来与远程服务端进行连接从而与服务进行交互客户端常用选项常用选项显示客户端版本指定远程连接用户名指定密码默认为空指定服务端主机指定端口默认指定连接时使用的文件该文件在服务端启动后生成指定数据库以格式输出以格式输出以格式输出默认项垂直显示执行结果显示详细信息配合选项启用压缩启用长命令执行完就退出非交互式运行修改命令提示符输出行号打印参数列表放在最前面连接超时时长单位一次查交互发送或反回数据的大小默认最大值为最小值为字节客户端命令中的命令分为两类分别是客户端命令和服务端命令客户端命令在本地执行服务端命令发送到服务端执行再返回执行结果到客户端上客户端命令和服务端命令都是通过客户端工具进行输入输出客户端命令常用命令显示帮助显示帮助清屏直接使用无法生效要配合命令使用清掉未执行的输入退出客户端退出客户端显示当前状态切换数据库调用系统命令修改提示符执行脚本文件客户端重新连接使用之前的参数设置文件名将输出结果同时保存一份到指定文件不保存输出结果至文件自定义语句分隔符将语句送到服务端执行将语句送到服务端执行垂直显示输出语句但不执行总是输出告警信息不输出告警信息设置编码先编辑语句再执行只能关闭服务不能启动服务也是用于管理服务的本地工具格式常用选项显示帮助信息显示客户端版本删库时不确认启用压缩指定服务器地址指定用户名指定连接服务器的密码指定连接端口默认在本地执行语句不写入执行出错时不发出告警音如果无法连接则静默退出总共执行多少次配合选项使用持续执行命令间隔秒执行一次指定连接时使用的文件如果连接失败是否等待重试如果指定了具体数字则表示重试几次客户端查件目录显示运行参数从指定文件中读取选项指定连接超时时长指定关机超时时长指定连接方式使用安全功能命令创建新的数据库开启调试模式将调试信息写入删除指定数据库显示扩展状态刷新所有统计表刷新状态和统计信息刷新客户端统计信息刷新所有缓存的主机刷新索引统计信息刷新所有日志刷新访问权限刷新二进制日志刷新引擎日志刷新错误日志开一个新日志文件刷新执行日志刷新中继日志刷新慢查询日志清除状态变量清除表统计信息刷新所有表会强制关闭己打开的表刷新线程缓存刷新用户统计信息刷新用户资源关闭指定的线程修改密码修改密码时指定旧密码心跳检测显示活动线程列表刷新授权信息刷新所有数据表重新打开日志文件关闭服务简短显示服务端状态开启主从同步停止主从同步显示服务端所有变量显示客户端和服务端版本信息显示客户端版本服务端版本信息显示状态信息测试主机服务存活性数据库操作创建数据库删除数据库一次只能删一个工具是基于开发的的命令行工具具有自动完成和语法突出显示功能语言关系数据库的构成组件关键字说明数据库表的集合一个数据库中可以有多个表在文件系统中表现为一个目录表在数据库中以二维表的形式出现有行和列数据库中的数据就是存放于表中的索引索引通常建立在一个列上用以加快数据查询速度视图用语言构建的虚拟表可以临时把两个或多个表以逻辑关系关联对外提供查询存储过程存储过程是一组为了完成特定功能的语句集合客户端可以直接调用存储函数存储函数和存储过程一样都是语句集合但可以使用参数触发器触发器也是由语句的集合组成但需要达到触发条件才能调用事件调度器数据库中的计划任务用户连接服务端时的用户名权限每个用户可以对哪些数据库或表进行操作以及在什么下能连接结构化查询语言语言规范在数据库系统中语句不区分大小写建议用大写语句可单行或多行书写默认以结尾关键词不能跨多行或简写用空格和缩进来提高语句的可读性子句通常位于独立行便于编辑提高可读性符号在中特别是在和这样的数据库系统中前缀用于访问系统变量系统变量是数据库服务器在运行时维护的一组值这些值可以影响服务器的操作或提供有关服务器状态的信息语句类型简介语句类型说明具体语句数据定义语言数据操作语言数据查询语言数据控制语言事务控制语言示例查看数据库列表创建一个名叫的数据库修改数据库命令格式删除数据库命令格式这是一个特殊的系统数据库包含了关于其他数据库的信息如表结构列信息索引权限等您不能在这个数据库中直接存储用户数据但它对于获取关于数据库服务器的元数据非常有用这个数据库通常用于存储服务器的系统级信息如用户账户权限存储过程和事件等它是服务器正常运行所必需的您应该避免直接修改这个数据库中的表除非您完全了解这些表的作用和如何安全地修改它们这个数据库提供了关于服务器性能的信息如查询执行时间锁等待表等它可以帮助数据库管理员监控和优化数据库的性能与一样您不应该在这个数据库中存储用户数据这是一个默认创建的空数据库通常用于测试目的您可以在这个数据库中创建表插入数据等以进行数据库操作的学习或测试而不会影响其他重要的数据库数据类型支持多种类型大致可以分为三类数值日期时间和字符串字符类型数值型支持所有标准数值数据类型原则上来说个个字节一个字节位所以一个占位一个位能表示两个数字和所以一个能够表示的数字范围整数型这些类型包括严格数值数据类型和以及近似数值数据类型和布尔型是的同义词值被视为假非值视为真日期和时间型表示时间值的日期和时间类型为和每个时间类型有一个有效值范围和一个零值当指定不合法的不能表示的值时使用零值类型有专有的自动更新特性即这条记录如果有字段是类型那该记录更新后会自动更新字符串类型字符串类型指和和和中括号中代表字符的个数并不代表字节个数比如就可以存储个字符和类型类似但它们保存和检索的方式不同它们的最大长度和是否尾部空格被保留等方面也不同在存储或检索过程中不进行大小写转换类型的字符串检索速度要比类型的快对于数据处理的长度也有区别若存入字符数小于则以空格补于其后查询之时再将空格去掉所以类型存储的字符串末尾不能有空格不限于此是固定长度不管是存入几个字符都将占用个字节是存入的实际字符数个字节所以存入个字符将占用个字节和在存储层面节省一些字符空间真实值中存储的内容存储用的空间中存储的内容存储占用的空间表示个空格字节字节字节字节字节字节字节字节加入有一串字符串分别使用和方式进行存储他们的表现样式如下样式样式看起来是节省了空间但是当我们的存储数据发生改变了比如说第一个变成了样式因为留有空间所以可以随时替换样式因为数据没有空闲空间所以需要一个额外的空间保留所以的旧数据就变成了数据碎片没有太大的作用了如果后来更换成了那么就变成了碎片原来的数据就变成了和可指定不能指定内部存储是存入的实际字符数个字节是实际字符数个字节类型不能有默认值可直接创建索引创建索引要指定前多少个字符查询速度快于二进制数据和存储方式不同以文本方式存储英文存储区分大小写以二进制方式存储不分大小写存储的数据只能整体读出可以指定字符集不用指定字符集和类似于和不同的是它们包含二进制字符串而不要非二进制字符串也就是说它们包含字节字符串而不是字符字符串这说明它们没有字符集并且排序和比较基于列值字节的数值数据类型占用空间大小说明字节定长字符串字节变长字符串字节不超过个字符的二进制字符串字节短文本字符串字节二进制形式的长文本数据字节长文本数据字节二进制形式的中等长度文本数据字节中等长度文本数据字节二进制形式的极大文本数据字节极大文本数据选择正确的数据类型对于获得高性能至关重要更小的通常更好尽量使用可正确存储数据的最小数据类型简单就好简单数据类型的操作通常需要更少的周期尽量避免包含为的列对更难优化修饰符适用所有类型的修饰符修饰符说明数据列可包含值默认值数据列不允许包含值指定默认值主键所有记录中此字段的值不能重复且不能为空唯一键所有记录中此字段的值不能重复但可以为空指定一个字符集适用数值型的修饰符修饰符说明自动递增适用于整数类型必须作用于某个的字段比如无符号语句语句主要用来操作数据库中的表同一个库中不同表可以使用不同的存储引擎但建议使用同一种存储引擎查看表查看表的基本结构查看表有哪些字段组成注意上面的两种信息查看的效果是一样的创建表直接创建修饰符修饰符字段格式定义字段数据类型将该字段设为主键设置为索引设置为联合主键表选项示例查看数据库信息在数据库外面查看所有表进入数据库查看表结构信息查看表的基本字段信息创建表的基本流程进入库然后创建表创建数据库选择数据库进入数据库后创建数据表查看表复制方式创建表特点这种方式创建的数据表如果源数据表内有数据的话复制表里面也会有数据查看数据表结构基于复制方式创建表仅结构通过方式创建表查看建表语句格式查看表的创建语法查看表的基本状态查看一个表的状态表名外侧有单引号查看一个库里面所有表的状态查看表的的状态查看库里的所有表的状态查看表所支持的引擎存储引擎决定了数据如何被存储读取更新和删除它是数据库的核心服务之一用于存储处理和保护数据同时控制对数据的访问权限并快速处理事务简单来说存储引擎就是如何把数据存到文件系统中然后如何从文件系统中读取数据到内存里面查看当前服务支持的引擎示例数据库数据库引擎的解读是的改进版提供了崩溃安全的表并继承了的特性它主要用于内部临时表和权限表不支持事务是表的集合允许将多个表合并为一个虚拟表不支持事务存储引擎基于哈希表数据存储在内存中非常适合用于临时表不支持事务引擎就像一个黑洞任何写入它的数据都会消失类似于中的不支持事务是非事务性存储引擎具有良好的性能和较小的数据占用空间不支持事务存储引擎将表存储为文件非常适合与其他系统进行数据交换不支持事务引擎通过压缩表来减少存储占用空间非常适合存储历史数据不支持事务引擎允许访问其他服务器上的表支持事务和其他高级功能存储引擎用于性能监控和分析不支持事务是的默认存储引擎支持事务行级锁定外键和表加密是大多数应用场景的首选引擎生成填充有顺序值的表非常适合需要生成唯一序列号的场景支持事务修改表结构列名类型旧列名新列名新列类型列名默认值列名类型列名新表名示例修改为向表中插入一个新的字段排在字段后面删除字段字段类型修改修改数据表的的字段类型改为类型修改表的的字段名字改为名字类型是字段默认值修改修改的默认值为添加字段的时候设定默认值修改字段默认值主键的增删主键对于一个数据表来说非常的重要很多数据的批量操作都限制了只能依赖于主键才可以继续下去所以对于主键的处理我们一定要上心常见的主键操作主要有以下几种样式为一个表的现有字段增加删除一个主键表名字段名为一个表的增加删除一个之前不存在的主键表名将一个表的现有主键进行自增属性的增加表名或将上面命令拆解成两个表名字段名表名字段名示例将字段设置为主键将主键标识从表中移除为表增加一个主键代表是第一个位置为增加一个自增主键类型为无符号型查看自增的起始值方法命令格式数据库名数据表名方法命令格式表名示例查看库里面的自增值自增起始表的移除删除表语句语句包括插入数据普通的查插入数据可以一次往表中插入一条或多条记录根据条件插入数据如果记录不存在就新增如果存在就更新插入一条数据只给出部份字段值因为有些字段有默认值没有默认值的直接用替代不指定字段的话那么就需要按照顺序为每个字段赋予数据值一次插入多条字段给定后多来几个组合即可彼此用逗号隔开基于方式插入数据基于筛选出来的结果作为信息数据进入插入基于的数据然后根据字段的方式插入到数据表里面对于的空值条件判断要使用否则会导致失败删除数据删除表中的数据不会缩减数据文件大小在生产环境中一般是逻辑删除是指用一个字段标识该条记录己经删除了在业务中不可用而不是真的删除在直实生产环境中一般不会对数据做物理删除而是用字段来标记为逻辑删除将对应字段值设为某个特定项认为是己删除清空表数据语句不支持事务效率更高语句清理表数据语句说明字段显示可以使用别名子句指明过滤条件以实现选择的功能过滤条件布尔型表达式算术操作符比较操作符相等或都为空非标准逻辑操作符范例查询不连续的查询空查询去除重复行范例模糊查询使用表示任意长度的任意字符表示任意单个字符正则表达式索引失效不建议使用匹配字符串可用正则表达式书写模式同上根据指定的条件把查询结果进行分组以用于做聚合运算常见聚合函数注意聚合函数不对统计对分组聚合运算后的结果指定过滤条件一旦分组语句后只跟分组的字段聚合函数根据指定的字段对查询结果进行排序升序降序对查询的结果进行输出行数数量限制跳过显示行默为值为写锁独占或排它锁只有一个读和写操作读锁共享锁同时多个读操作语句进阶多表查询语句类型查询分类说明子查询在语句中嵌套着查询语句性能较差基于某语句的查询结果再次进行的查询联合查询交叉连接笛卡尔积等值内连接让表之间的字段以等值建立连接关系不等值内连接让表之间的字段以不等值建立连接关系自然连接去掉重复列的等值连接左外连接右外连接完全外连接不支持此写法自连接本表和本表进行连接查询子查询子查询即语句调用另一个子句可以是对同一张表也可以是对不同表子查询主要有四种用法用于比较表达式中的子查询子查询仅能返回单个值用于中的子查询子查询应该单独查询并返回一个或多个值重新构成列表用于和用于子句中的子查询存在与否子查询用于和包括子句的返回值是一个值内部有一个子查询语句将其称为的内查询语句其内查询语句返回一个结果集子句根据其内查询语句的结果集空或者非空返回一个布尔值将外查询表的每一行代入内查询作为检验如果内查询返回的结果为非空值则子句返回外查询的这一行数据便可作为外查询的结果行返回否则不能作为结果或用在之后且后面紧跟子查询语句带括号或只关心子查询有没有结果并不关心子查询的结果具体是什么下面语句把的记录逐条代入到后面的子查询中如果子查询结果集不为空即说明存在那么这条的记录出现在最终结果集否则被排除联合查询中的联合连接或称联合主要用于合并两个或多个语句的结果集并返回合并后的结果这些语句必须拥有相同数量的列且对应列的数据类型也需要兼容联合连接有两种主要形式和交叉连接的交叉连接是一种特殊的连接操作它返回两个或多个表中所有可能的行组合交叉连接简单地将两个表的所有记录相互匹配生成的结果集是两个表的笛卡尔积即如果表有行表有行那么交叉连接的结果集将包含行内链接中的内连接是一种基本的连接操作用于从两个或多个表中返回满足连接条件的记录内连接只返回那些在连接条件中有匹配值的记录如果某个记录在连接的一个表中存在但在另一个表中没有匹配的连接值则该记录不会出现在结果集中基本语法列名列名指定要从连接的结果集中选择的列表指定连接操作中的第一个表表指定要与第一个表进行内连接的第二个表表列名表列名定义连接条件两个表中哪些列的值应该相等然后记录匹配在一起内连接也可以使用其他关键字或子句进行扩展比如等以满足更复杂的查询需求自然链接自然连接是一种特殊的内连接用于在两个或多个表之间基于相同列名进行匹配并将匹配到的记录组合在一起同时消除重复的列当源表和目标表共享相同名称的列时就可以在它们之间执行自然连接而无需指定连接列在使用纯自然连接时如没有相同的列时会产生交叉连接笛卡尔乘积语法格式外连接中的外连接是一种数据库查询操作用于联结两个或多个表并返回满足指定条件的记录同时包括那些在联结条件中不匹配的记录自连接自连接是中的一种连接操作它允许一个表与其自身进行连接这种操作在处理需要比较表中记录之间关系的场景时非常有用通过自连接你可以将表看作两个不同的表并基于它们之间的某些匹配条件来组合数据自连接的基本语法类似于其他类型的连接但关键在于给同一个表指定两个不同的别名是用于连接两个实例的表的匹配条件自连接的作用查找表中具有特定关系的记录例如有一个员工表其中包含员工和经理你可以使用自连接来查找每个员工的经理信息查找表中的层级关系例如一个组织结构表其中每个节点都有一个父节点你可以使用自连接来查找某个节点的所有上级节点查找表中的重复记录例如有一个客户表你想找到所有具有相同电子邮件地址的客户你可以使用自连接来比较表中的记录性能自连接可能会产生大量的中间结果集因此在大数据集上使用时需要特别注意性能别名务必为同一个表的不同实例使用不同的别名否则会导致语法错误条件确保连接条件正确以避免返回不相关的结果注入注入是指应用程序对用户输入的数据没有严格校验没有做合法性判断或者过滤不严格让攻击者可以通过传参的形式构建特殊的语句并执行以此来实现欺骗数据库服务器执行非授权的任意查询从而进一步得到相应的数据信息并非法获取系统权限语句处理的顺序查询执行路径中的组件查询缓存解析器预处理器优化器查询执行引擎存储引擎语句的执行流程解析笛卡尔积不符合也添加主表保留非聚合非别名改变对表引用只作用分组后可使用别名高阶语法视图虚拟表保存有实表的查询结果相当于别名利用视图可以隐藏表真实结构在程序中利用视图进行查询可以避免表结构的变化而修改程序降低程序和数据库之间的耦合度视图中的数据实际上是存在于相对应的表中视图本身没有数据因此修改视图中的数据本质上是修改了表中的数据视图是一种虚拟表它基于查询的结果集创建视图查看视图只能看视图定义可以查看表和视图删除视图环境变量中的变量分为系统内置变量和用户自定义变量系统变量数据库中内置的变量可用引用用户自定义变量分为以下两种普通变量在当前会话中有效可用引用局部变量在函数或存储过程内才有效需要用声明之后直接用引用自定义函数中定义局部变量语法局部变量的作用范围是在程序中而且定义局部变量语句必须在的第一行定义变量变量变量类型默认值为变量赋值存储过程的存储过程是一组为了完成特定功能的语句集它存储在数据库中可以被用户调用中的存储过程指的是存储在数据库中的语句集合当创建好存储过程后在运行时提供所需参数存储过程就可以以代码指定的方式使用参数执行并返回值它可以独立执行存储过程保存在表中封装与复用存储过程将复杂的逻辑封装在一起形成一个独立的执行单元用户可以通过调用存储过程来执行这些逻辑而无需每次都编写重复的语句这有助于提高代码的复用性和可维护性接收参数与返回数据存储过程可以接受输入参数并根据这些参数执行相应的逻辑同时存储过程也可以返回数据包括状态码结果集等编译与执行效率存储过程在创建时会被编译成二进制代码并存储在数据库中当存储过程被调用时数据库可以直接执行这些预编译的代码而无需每次都重新编译语句这有助于提高数据库的执行效率存储过程与自定义函数的区别存储过程实现的过程要复杂一些而函数的针对性较强存储过程可以有多个返回值而自定义函数只有一个返回值存储过程一般可独立执行而函数往往是作为其他语句的一部分来使用无参数的存储过程执行过程中可以不加函数必须加存储过程语法创建存储过程存储过程名参数列表语句其中参数列表可以包含输入参数输出参数或输入输出参数调用存储过程存储过程名参数值查看存储过程查看存储过程列表查看存储过程定义修改存储过程语句修改存储过程只能修改存储过程的注释等无关紧要的东西不能修改存储过程体所以要修改存储过程方法就是删除重建删除存储过程存储过程名流程控制存储过程中的流程控制可以使用流程控制来控制语句的执行条件控制语句如等用于根据条件执行不同的语句用来进行条件判断根据是否满足条件执行不同语句用来进行条件判断可实现比语句更复杂的条件判断循环控制语句如等用于重复执行一组语句直到满足特定条件为止重复执行特定的语句实现一个简单的循环用于跳出循环控制相当于中跳出本次循环然后直接进入下一次循环相当于中有条件控制的循环语句当满足特定条件时就会跳出循环语句有条件控制的循环语句应用场景数据转换与迁移存储过程可以用于数据转换和迁移任务如将一种数据格式转换为另一种数据格式或将数据从一个表迁移到另一个表复杂逻辑处理存储过程可以封装复杂的逻辑如多表关联查询条件判断循环处理等报表生成存储过程可以用于生成报表数据如根据特定条件查询数据并返回结果集供报表工具使用触发器触发器是一种数据库管理系统中的功能它允许用户定义在指定表上的某些操作如或发生之前或之后自动执行的语句或语句集触发器是与表事件例如表的或操作相关联的命名数据库对象当在指定表上发生特定事件时触发器会自动激活并执行相应的语句特点触发器是数据库层面上的自动化工具当特定的数据库操作发生时自动执行无需手动调用触发器在事件发生时立即执行适用于需要实时处理数据变化的场景触发器可以帮助维护数据的完整性和一致性无需依赖应用程序代码来实现这些功能应用场景触发器在实际开发中有广泛的应用以下是几个常见的应用场景自动化任务触发器可以自动记录表数据变化的日志生成统计信息等例如在用户表中添加一条记录时同时在日志表中记录这条记录的信息数据验证可以在数据更新时验证数据的完整性和正确性例如确保账户余额始终非负实时同步保持多个表之间的一致性例如当主表的数据发生变化时相应的变更也会反映到备份表中复杂业务逻辑实现比简单约束更复杂的规则例如每当有新的员工加入公司时自动更新部门中的人数使用语法创建触发器使用语句来创建触发器触发器逻辑是触发器的名称或指定触发器是在操作之前还是之后执行或指定触发器响应的操作类型是触发器绑定的表表示触发器针对表中的每一行进行操作查看触发器可以使用命令来查看系统中存在的所有触发器样式样式删除触发器如果需要删除某个触发器可以使用语句事件调度器事件调度器是数据库服务器的一部分负责事件的调度不断监视某个事件是否被调用可以通过或命令查看事件调度器的状态通过命令开启使用命令可以开启事件调度器通过命令关闭使用命令可以关闭事件调度器通过配置文件开启在配置文件中找到选项然后添加代码并保存之后重启服务即可生效注意事项通过命令开启或关闭事件后重启服务后事件又会回到原来的状态默认为如果想要始终开启或关闭事件需要修改配置文件事件管理创建事件语句创建一个事件每个事件由两个主要部分组成第一部分是事件调度表示事件何时启动以及按什么频率启动第二部分是事件动作这是事件启动时执行的代码事件的动作包含一条语句它可能是一个简单地或者语句也可以是一个存储过程或者语句块这两种情况允许我们执行多条用户管理创建用户格式范例重命名用户格式删除用户格式范例删除默认的空用户密码信息中的密码是放在表中字段中但中还保留了字段',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-06-05 10:52:06',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Hexo</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">June 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">13</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">No title</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-06-05T01:52:55.088Z" title="Created 2025-06-05 09:52:55">2025-06-05</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-06-05T02:52:06.151Z" title="Updated 2025-06-05 10:52:06">2025-06-05</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为长沙"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>长沙</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://lx1me.github.io/2025/06/05/MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93/"><header><h1 id="CrawlerTitle" itemprop="name headline">No title</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">John Doe</span><time itemprop="dateCreated datePublished" datetime="2025-06-05T01:52:55.088Z" title="Created 2025-06-05 09:52:55">2025-06-05</time><time itemprop="dateCreated datePublished" datetime="2025-06-05T02:52:06.151Z" title="Updated 2025-06-05 10:52:06">2025-06-05</time></header><h1 id="MySQL-数据库"><a href="#MySQL-数据库" class="headerlink" title="MySQL 数据库"></a><strong>MySQL</strong> <strong>数据库</strong></h1><hr>
<h2 id="title-MySQL-数据库date-2025-06-05-12-00-00categories-数据库-tags-MySQL-数据分类-description-MySQL-数据库中数据的分类概述与示例"><a href="#title-MySQL-数据库date-2025-06-05-12-00-00categories-数据库-tags-MySQL-数据分类-description-MySQL-数据库中数据的分类概述与示例" class="headerlink" title="title: MySQL 数据库date: 2025-06-05 12:00:00categories: [数据库]tags: [MySQL, 数据分类]description: MySQL 数据库中数据的分类概述与示例"></a>title: MySQL 数据库<br>date: 2025-06-05 12:00:00<br>categories: [数据库]<br>tags: [MySQL, 数据分类]<br>description: MySQL 数据库中数据的分类概述与示例</h2><h2 id="数据的分类"><a href="#数据的分类" class="headerlink" title="数据的分类"></a><strong>数据的分类</strong></h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">结构化数据</span><br><span class="line">结构化数据一般是指可以用二维表来逻辑表达实现的数据。是有固定的格式和有限长度的数据，可以用关系型数据库表示和存储。</span><br><span class="line"> 其特点是：数据以行为单位，一行数据表示一个实体信息，每一行数据的属性是相同的，存储在数据库中；能够用统一的数据类型和结构加以表示；也能够用二维表结构来逻辑表达实现，包含属性和元组。</span><br></pre></td></tr></table></figure>

<p>![image-20250306095427883](..&#x2F;image&#x2F;MySQL 数据库&#x2F;image-20250306095427883.png)</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">半结构化数据</span><br><span class="line"> 半结构化数据就是介于完全结构化数据和完全无结构的数据之间的数据。</span><br><span class="line">    半结构化数据是结构化数据的一种形式，它并不符合关系型数据库或其它数据表的形式关联起来的数据模型结构，但包含相关的标记，用来分隔语义元素及对记录和字段进行分层，数据的结构和内容混在一起，没有明显的区分，因此，这种数据也被称为自描述结构的数据。</span><br><span class="line">  例如：HTML文档、JSON、XML、yaml 和一些 NoSQL 数据库等就属于半结构化数据。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>![image-20250306095604134](..&#x2F;image&#x2F;MySQL 数据库&#x2F;image-20250306095604134.png)</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">非结构化数据</span><br><span class="line">  就是没有固定结构的数据，这种数据没有固定格式和有限长度，无法用数据库二维逻辑表来表现其结构，对于这类数据，我们一般进行整体存储。</span><br><span class="line">  典型的非结构化数据包括：二进制文件，音视频文件，位置信息，markdown文件等 </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h2 id="ER模型"><a href="#ER模型" class="headerlink" title="ER模型"></a>ER模型</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">全称为实体联系模型、实体关系模型或实体联系模式图（ERD：Entity<span class="literal">-relationship</span> model），它提供不受任何DBMS约束的面向用户的表达方法，在数据库设计中被广泛用作数据建模的工具。</span><br><span class="line">一般情况下，当我们要设计一个数据库或者数据表的时候，只要看到ER图，不管你用的是哪一种关系型数据库软件，你都可以将这个数据库和表建出来。</span><br></pre></td></tr></table></figure>

<p>E-R图模型的组成是由实体，属性和联系三部份组成。</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">实体：( Entity ) </span><br><span class="line"> 实体是数据的使用者，代表软件系统中客观存在的生活中的实物，同一类实体构成实体集。</span><br><span class="line"> 在ER图中，实体用矩形表示。</span><br><span class="line">属性：( Attribute ) </span><br><span class="line"> 实体中的所有特性称为属性，每个属性描述的是实体的单个特性。在ER图中，属性用椭圆形表示。</span><br><span class="line">联系：( Relationship ) </span><br><span class="line"> 描述了实体的属性之间的关联规则。在ER图中，联系用菱形表示。</span><br></pre></td></tr></table></figure>

<p>ER模型范例：</p>
<p>![image-20250306095930198](..&#x2F;image&#x2F;MySQL 数据库&#x2F;image-20250306095930198.png)</p>
<p>实体间的联系有三种类型：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">一对一联系 ( <span class="number">1</span>:<span class="number">1</span> )：</span><br><span class="line"> 例如，一个学号只能分配给一个同学，每个同学都有一个学号，则学号与同学的联系是一对一。</span><br><span class="line">一对多联系 ( <span class="number">1</span>:n )：</span><br><span class="line"> 例如，一个老师可以教授多门课程，每门课程只能有一个老师教授，则老师与课程的联系是一对多。</span><br><span class="line">多对多联系 ( m:n )：</span><br><span class="line"> 例如，一个同学可以报名多门课程，每门课程下有多个同学，则同学与课程的联系是多对多。</span><br></pre></td></tr></table></figure>

<h2 id="SQL-结构化查询语言"><a href="#SQL-结构化查询语言" class="headerlink" title="SQL 结构化查询语言"></a>SQL <strong>结构化查询语言</strong></h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL：( Structure Query Language )， 结构化查询语言。</span><br><span class="line">  是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统，SQL语句就是用SQL语言写的用于操作数据库的语句。</span><br><span class="line">工作模式:</span><br><span class="line">  关系型数据库一般工作于C/S模式下，使用专有协议进行通信，服务端程序监听特有端口，客户端程序发送查询语句到服务端，服务端将查询结果返回给客户端。</span><br><span class="line">  MySQL自带<span class="built_in">CLI</span> 接口，GUI 接口可以使用第三方工具实现，在应用程序或后端开发语言中，使用相应的编程语言下的数据库驱动来进行与数据库服务端的通信。  </span><br><span class="line"> </span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>MySQL数据库中的SQL查询语句执行流程</p>
<p>![image-20250306100230762](..&#x2F;image&#x2F;MySQL 数据库&#x2F;image-20250306100230762.png)</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 接收查询语句：</span><br><span class="line"> 用户通过客户端或编程语言框架里面的驱动模块，经由专门的通信协议，向MySQL服务器发送SQL查询语句。</span><br><span class="line"> 如果是mysql服务端，这里的通信协议端口是 <span class="number">3306</span></span><br><span class="line"> 数据库服务端内部的连接器接收查询请求后，首先到本地的缓存记录中检索信息</span><br><span class="line"> 如果有信息，则直接返回查询结果</span><br><span class="line"> 如果没有信息，则将信息直接传递给后端的数据库解析器来进行处理</span><br><span class="line"> </span><br><span class="line"><span class="number">2</span> 词法分析和语法分析：</span><br><span class="line"> MySQL服务器首先会对接收到的查询语句进行词法分析，将其分解成一系列的词法单元。</span><br><span class="line"> 接着，进行语法分析，检查这些词法单元是否符合SQL语法规则。如果语法错误，MySQL会立即返回错误信息。</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> 语义分析：</span><br><span class="line">    在语法分析之后，MySQL会进行语义分析，检查查询语句中的表、列、函数等是否存在，以及用户是否有足够的权限执行该查询。</span><br><span class="line">    语义分析还会检查查询语句中的数据类型是否匹配，以及是否存在违反数据库完整性的约束。</span><br><span class="line"></span><br><span class="line"><span class="number">4</span> 查询优化：</span><br><span class="line">    MySQL的查询优化器会对查询语句进行优化，决定最优的执行查询计划 <span class="literal">--</span> 也就是怎么走会效率更快。</span><br><span class="line">    优化过程包括选择最佳的访问路径、索引、连接顺序等，以最小化查询的执行时间和资源消耗。</span><br><span class="line">    优化器还会考虑统计信息，如表的行数、索引的分布等，以做出更明智的决策。</span><br><span class="line"></span><br><span class="line"><span class="number">5</span> 查询执行：</span><br><span class="line">    优化后的查询计划被传递给执行器进行执行。执行器根据查询计划访问存储引擎，获取数据。</span><br><span class="line">   存储引擎将文件系统里面的数据库文件数据，加载到内存，然后在内存中做一次聚合</span><br><span class="line">   然后，临时放到查询缓存中，便于下次遇到相同的查询语句重复过来。</span><br><span class="line">    在执行过程中，MySQL可能会使用缓存来加速查询的执行。从MySQL <span class="number">8.0</span>开始，查询缓存已被移除。</span><br><span class="line"></span><br><span class="line"><span class="number">6</span> 结果集返回：</span><br><span class="line"> 执行器将查询结果集返回给客户端。结果集可以包含零行或多行数据，具体取决于查询的内容。</span><br><span class="line"> 如果查询涉及聚合函数（如SUM、AVG等）或分组操作（如<span class="built_in">GROUP</span> BY），执行器还会在返回结果之前对这些数据进行相应的处理。</span><br><span class="line"></span><br><span class="line"><span class="number">7</span> 错误处理和日志记录：</span><br><span class="line"> 如果在执行过程中遇到任何错误（如权限不足、表不存在等），MySQL会返回相应的错误信息给客户端。</span><br><span class="line">  同时，MySQL还会记录查询的执行日志，以便进行性能分析和故障排查。</span><br></pre></td></tr></table></figure>

<h2 id="MySQL-安装和基本使用"><a href="#MySQL-安装和基本使用" class="headerlink" title="MySQL 安装和基本使用"></a><strong>MySQL</strong> 安装和基本使用</h2><h3 id="MySQL-软件"><a href="#MySQL-软件" class="headerlink" title="MySQL 软件"></a><strong>MySQL</strong> 软件</h3><p>![image-20250306100537304](..&#x2F;image&#x2F;MySQL 数据库&#x2F;image-20250306100537304.png)</p>
<p>MySQL 的特性</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- MySQL 是基于开源协议发布的，可以免费使用，也可以基于源码进行二次开发。</span><br><span class="line">- MySQL 使用标准 SQL 语言进行管理。</span><br><span class="line">- MySQL 可以运行于多个系统上，具有跨平台特性，并且支持多种语言。</span><br><span class="line">- MySQL 使用插件式存储引擎，不同的存储引擎，有着不同的功能和特性，使用者可以根据需要灵活选择。</span><br><span class="line">- MySQL 基于单进程，多线程的模式进行工作。</span><br><span class="line">- MySQL 提供了大量的测试组件和诸多的扩展。</span><br></pre></td></tr></table></figure>

<h3 id="MySQL-安装方式"><a href="#MySQL-安装方式" class="headerlink" title="MySQL 安装方式"></a><strong>MySQL</strong> 安装方式</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">rocky9</span> ~]<span class="comment"># yum install -y mysql-server</span></span><br><span class="line">root@ubuntu24:~<span class="comment"># apt install mysql-server -y</span></span><br></pre></td></tr></table></figure>

<h3 id="mariadb安装方式"><a href="#mariadb安装方式" class="headerlink" title="mariadb安装方式"></a><strong>mariadb</strong>安装方式</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">rocky9</span> ~]<span class="comment"># yum install mariadb-server -y</span></span><br></pre></td></tr></table></figure>

<h2 id="MySQL-多实例"><a href="#MySQL-多实例" class="headerlink" title="MySQL 多实例"></a><strong>MySQL</strong> <strong>多实例</strong></h2><h3 id="数据库多实例"><a href="#数据库多实例" class="headerlink" title="数据库多实例"></a>数据库多实例</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">拿 MySQL 数据库来说明，就是在一台服务器上运行多个 MySQL 服务端进程，每个进程监听一个端口（<span class="number">3306</span>，<span class="number">3307</span>，<span class="number">3308</span>），维护一套属于其自己的配置和数据，客户端使用不同的端口来连接具体服端进程，从而实现对不同的实例的操作。</span><br></pre></td></tr></table></figure>

<p>多实例的优点</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- 节约硬件资源：</span><br><span class="line"> 在某些场景下（比如说测试，调研，新旧业务并存等），需要配置不同的 MySQL 数据库版本，而又没有</span><br><span class="line">足够多的服务器资源，则可以选择在一台服务器上用不同的版本实现多开来满足需求。</span><br><span class="line"> </span><br><span class="line">- 便于对比：</span><br><span class="line"> 在一个完全相同的硬件环境中，运行不同的 MySQL 版本，使用相同的参数进行测试，调研时，可以最大</span><br><span class="line">程度的减少外部环境因素的影响，便于得出更准确的结论。</span><br><span class="line"> </span><br><span class="line">- 便于管理：</span><br><span class="line"> 在一台服务器上运行多个实例，同理，只需要在这一台服务器上配置安全规则，就可以完成对多个实例的</span><br><span class="line">访问授权，而且对于数据库的备份，停启等工作，也只需要在这一台服务器上完成。</span><br></pre></td></tr></table></figure>

<p>多实例的缺点</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 资源抢占：</span><br><span class="line"> 一台服务器上运行多个服务实例，资源总量恒定，一个实例占用的资源无法被另一个实例所使用，在这种情况下，服务性能会受到影响，无法体现 MySQL 服务的实际性能。</span><br><span class="line">- 存在单点风险：</span><br><span class="line"> 一台服务器上部署多个服务实例，如果该服务器当机，则这多个服务实例都会受影响。</span><br></pre></td></tr></table></figure>

<h2 id="MySQL-组成和常用工具"><a href="#MySQL-组成和常用工具" class="headerlink" title="MySQL 组成和常用工具"></a><strong>MySQL</strong> <strong>组成和常用工具</strong></h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql 基于 C/S 模式提供服务，主要有客户端程序和服务端程序组成，另外还有一些管理工具。</span><br></pre></td></tr></table></figure>

<h2 id="MySQL-命令行操作"><a href="#MySQL-命令行操作" class="headerlink" title="MySQL 命令行操作"></a><strong>MySQL</strong> <strong>命令行操作</strong></h2><h3 id="MySQL-命令行工具"><a href="#MySQL-命令行工具" class="headerlink" title="MySQL****命令行工具"></a><strong>MySQL****命令行工具</strong></h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">MySQL 服务基于 C/S 架构，用户主要使用客户端工具来与远程服务端进行连接，从而与 MySQL 服务进行交互。</span><br><span class="line">MySQL 客户端常用选项</span><br><span class="line">  mysql [<span class="type">OPTIONS</span>] [<span class="type">database</span>]</span><br><span class="line">  常用选项</span><br><span class="line">  <span class="literal">-V</span>|<span class="literal">--version</span> <span class="comment">#显示客户端版本</span></span><br><span class="line">  <span class="literal">-u</span>|<span class="literal">--user</span>=name <span class="comment">#指定远程连接用户名</span></span><br><span class="line">  <span class="literal">-p</span>|<span class="literal">--password</span>[=<span class="type">name</span>] <span class="comment">#指定密码, 默认为空</span></span><br><span class="line">  <span class="literal">-h</span>|<span class="literal">--host</span>=host     <span class="comment">#指定服务端主机</span></span><br><span class="line">  <span class="literal">-P</span>|<span class="literal">--port</span>=port <span class="comment">#指定端口，默认3306</span></span><br><span class="line">  <span class="literal">-S</span>|<span class="literal">--socket</span>=name <span class="comment">#指定连接时使用的socket文件，该文件在服务端启动后生成</span></span><br><span class="line">  <span class="literal">-D</span>|<span class="literal">--database</span>=db <span class="comment">#指定数据库</span></span><br><span class="line">  <span class="literal">-H</span>|<span class="literal">--html</span>         <span class="comment">#以html格式输出</span></span><br><span class="line">  <span class="literal">-X</span>|<span class="literal">--xml</span>           <span class="comment">#以xml格式输出</span></span><br><span class="line">  <span class="literal">-t</span>|<span class="literal">--table</span> <span class="comment">#以table格式输出，默认项</span></span><br><span class="line">  <span class="literal">-E</span>|<span class="literal">--vertical</span> <span class="comment">#垂直显示执行结果</span></span><br><span class="line">  <span class="literal">-v</span>|<span class="literal">--verbose</span> <span class="comment">#显示详细信息，配合 -t 选项</span></span><br><span class="line">  <span class="literal">-C</span>|<span class="literal">--compress</span> <span class="comment">#启用压缩</span></span><br><span class="line">  <span class="literal">-G</span>|<span class="literal">--named-commands</span> <span class="comment">#启用长命令</span></span><br><span class="line">  <span class="literal">-e</span>|<span class="literal">--execute</span>=sql <span class="comment">#执行完就退出，非交互式运行</span></span><br><span class="line">  <span class="literal">--prompt</span>=name <span class="comment">#修改命令提示符</span></span><br><span class="line">  <span class="literal">--line-numbers</span>     <span class="comment">#输出行号</span></span><br><span class="line">  <span class="literal">--print-defaults</span> <span class="comment">#打印参数列表，放在最前面</span></span><br><span class="line">  <span class="literal">--connect-timeout</span>=N <span class="comment">#连接超时时长，单位S</span></span><br><span class="line">  <span class="literal">--max-allowed-packet</span>=N <span class="comment">#一次查交互发送或反回数据的大小，默认16MB，最大值为1GB，最小值为4096字节  </span></span><br></pre></td></tr></table></figure>

<h2 id="mysql客户端命令"><a href="#mysql客户端命令" class="headerlink" title="mysql客户端命令"></a>mysql客户端命令</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MySQL 中的命令分为两类，分别是客户端命令和服务端命令。</span><br><span class="line">客户端命令在本地执行。服务端命令发送到服务端执行，再返回执行结果到客户端上。</span><br><span class="line">客户端命令和服务端命令，都是通过MySQL 客户端工具进行输入输出。</span><br></pre></td></tr></table></figure>

<p>MySQL 客户端命令</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(<span class="type">none</span>)]&gt; ?</span><br><span class="line"><span class="comment">#常用命令</span></span><br><span class="line">?|\? <span class="comment">#显示帮助</span></span><br><span class="line">help|\h <span class="comment">#显示帮助</span></span><br><span class="line"><span class="built_in">clear</span>|\c <span class="comment">#清屏，直接使用无法生效，要配合 system 命令使用，清掉未执行的输入</span></span><br><span class="line"><span class="keyword">exit</span>|\q <span class="comment">#退出客户端</span></span><br><span class="line">quit|\q <span class="comment">#退出客户端</span></span><br><span class="line">status|\s <span class="comment">#显示当前状态</span></span><br><span class="line">use|\u <span class="comment">#切换数据库</span></span><br><span class="line">system|\! <span class="comment">#调用系统命令</span></span><br><span class="line">prompt|\R <span class="comment">#修改提示符</span></span><br><span class="line">source|\. <span class="comment">#执行SQL脚本文件</span></span><br><span class="line">connect|\r <span class="comment">#客户端重新连接，使用之前的参数</span></span><br><span class="line"><span class="built_in">tee</span>|\T <span class="comment">#设置文件名，将输出结果同时保存一份到指定文件</span></span><br><span class="line">notee|\t <span class="comment">#不保存输出结果至文件</span></span><br><span class="line">delimiter|\d <span class="comment">#自定义SQL语句分隔符</span></span><br><span class="line">go|\g <span class="comment">#将语句送到服务端执行</span></span><br><span class="line">ego|\G <span class="comment">#将语句送到服务端执行，垂直显示</span></span><br><span class="line">print|\p <span class="comment">#输出语句，但不执行</span></span><br><span class="line">warnings|\W <span class="comment">#总是输出告警信息</span></span><br><span class="line">nowarning|\w <span class="comment">#不输出告警信息</span></span><br><span class="line">charset|\C <span class="comment">#设置编码</span></span><br><span class="line">edit|\e <span class="comment">#先编辑SQL语句，再执行</span></span><br></pre></td></tr></table></figure>

<h2 id="mysqladmin"><a href="#mysqladmin" class="headerlink" title="mysqladmin"></a><strong>mysqladmin</strong></h2><h5 id="mysqladmin-只能关闭服务，不能启动服务"><a href="#mysqladmin-只能关闭服务，不能启动服务" class="headerlink" title="mysqladmin 只能关闭服务，不能启动服务"></a>mysqladmin 只能关闭服务，不能启动服务</h5><h5 id="mysqladmin-shutdown"><a href="#mysqladmin-shutdown" class="headerlink" title="mysqladmin shutdown"></a>mysqladmin shutdown</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin 也是用于管理 mysql 服务的本地工具。</span><br><span class="line">格式：</span><br><span class="line">mysqladmin [<span class="type">OPTIONS</span>] command command....</span><br><span class="line">常用选项</span><br><span class="line">-?|<span class="literal">--help</span>         <span class="comment">#显示帮助信息</span></span><br><span class="line"><span class="literal">-V</span>|<span class="literal">--version</span>       <span class="comment">#显示客户端版本</span></span><br><span class="line"><span class="operator">-f</span>|<span class="literal">--force</span>         <span class="comment">#删库时不确认</span></span><br><span class="line"><span class="literal">-C</span>|<span class="literal">--compress</span>     <span class="comment">#启用压缩</span></span><br><span class="line"><span class="literal">-h</span>|<span class="literal">--host</span>=name     <span class="comment">#指定服务器地址</span></span><br><span class="line"><span class="literal">-u</span>|<span class="literal">--user</span>=name     <span class="comment">#指定用户名</span></span><br><span class="line"><span class="literal">-p</span>|<span class="literal">--password</span>[=<span class="type">name</span>] <span class="comment">#指定连接服务器的密码</span></span><br><span class="line"><span class="literal">-P</span>|<span class="literal">--port</span>=N       <span class="comment">#指定连接端口，默认3306</span></span><br><span class="line"><span class="literal">-l</span>|<span class="literal">--local</span>         <span class="comment">#在本地执行，语句不写入binlog</span></span><br><span class="line"><span class="literal">-b</span>|<span class="literal">--no-beep</span>       <span class="comment">#执行出错时不发出告警音</span></span><br><span class="line"><span class="literal">-s</span>|<span class="literal">--silent</span>       <span class="comment">#如果无法连接，则静默退出</span></span><br><span class="line"><span class="literal">-c</span>|<span class="literal">--count</span>=N       <span class="comment">#总共执行多少次，配合-i选项使用</span></span><br><span class="line"><span class="literal">-i</span>|<span class="literal">--sleep</span>=N     <span class="comment">#持续执行命令，间隔N秒执行一次</span></span><br><span class="line"><span class="literal">-S</span>|<span class="literal">--socket</span>=name <span class="comment">#指定连接时使用的socket文件</span></span><br><span class="line"><span class="literal">-w</span>|<span class="literal">--wait</span>[=<span class="comment">#]     #如果连接失败，是否等待重试，如果指定了具体数字，则表示重试几次</span></span><br><span class="line">--<span class="type">plugin</span>-<span class="type">dir</span>=<span class="type">name</span>   <span class="comment">#客户端查件目录</span></span><br><span class="line">--<span class="type">print</span>-<span class="type">defaults</span>         <span class="comment">#显示运行参数，</span></span><br><span class="line">--<span class="type">defaults</span>-<span class="type">file</span>=<span class="type">path</span>     <span class="comment">#从指定文件中读取选项</span></span><br><span class="line">--<span class="built_in">connect-timeout</span>=<span class="type">N</span> <span class="comment">#指定连接超时时长</span></span><br><span class="line">--<span class="type">shutdown</span>-<span class="type">timeout</span>=<span class="type">N</span> <span class="comment">#指定关机超时时长</span></span><br><span class="line">--<span class="type">protocol</span>=<span class="type">name</span>     <span class="comment">#指定连接方式 (tcp|socket|pipe|memory)</span></span><br><span class="line">--<span class="type">ssl</span>                   <span class="comment">#使用ssl安全功能</span></span><br><span class="line">命令</span><br><span class="line"><span class="type">create</span> <span class="type">databasename</span> <span class="comment">#创建新的数据库</span></span><br><span class="line"><span class="type">debug</span> <span class="comment">#开启调试模式，将调试信息写入log</span></span><br><span class="line"><span class="type">drop</span> <span class="type">databasename</span> <span class="comment">#删除指定数据库</span></span><br><span class="line"><span class="type">extended</span>-<span class="type">status</span>         <span class="comment">#显示扩展状态</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">all</span>-<span class="type">statistics</span>   <span class="comment">#刷新所有统计表</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">all</span>-<span class="type">status</span>       <span class="comment">#刷新状态和统计信息</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">client</span>-<span class="type">statistics</span> <span class="comment">#刷新客户端统计信息</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">hosts</span>           <span class="comment">#刷新所有缓存的主机</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">index</span>-<span class="type">statistics</span> <span class="comment">#刷新索引统计信息</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">logs</span>             <span class="comment">#刷新所有日志</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">privileges</span>       <span class="comment">#刷新访问权限</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">binary</span>-<span class="type">log</span>       <span class="comment">#刷新二进制日志</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">engine</span>-<span class="type">log</span>       <span class="comment">#刷新引擎日志</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">error</span>-<span class="type">log</span>         <span class="comment">#刷新错误日志，开一个新日志文件</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">general</span>-<span class="type">log</span>       <span class="comment">#刷新执行日志</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">relay</span>-<span class="type">log</span>         <span class="comment">#刷新中继日志</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">slow</span>-<span class="type">log</span>         <span class="comment">#刷新慢查询日志</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">status</span>           <span class="comment">#清除状态变量</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">table</span>-<span class="type">statistics</span> <span class="comment">#清除表统计信息</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">tables</span>           <span class="comment">#刷新所有表，会强制关闭己打开的表</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">threads</span>           <span class="comment">#刷新线程缓存</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">user</span>-<span class="type">statistics</span>   <span class="comment">#刷新用户统计信息</span></span><br><span class="line"><span class="type">flush</span>-<span class="type">user</span>-<span class="type">resources</span>   <span class="comment">#刷新用户资源</span></span><br><span class="line"><span class="type">kill</span> <span class="type">id</span>,<span class="type">id</span>,<span class="type">...</span> <span class="comment">#关闭指定的线程</span></span><br><span class="line"><span class="type">password</span> [<span class="built_in">new-password</span>] <span class="comment">#修改密码</span></span><br><span class="line"><span class="type">old</span>-<span class="type">password</span> [<span class="built_in">new-password</span>] <span class="comment">#修改密码时指定旧密码</span></span><br><span class="line"><span class="type">ping</span> <span class="comment">#心跳检测</span></span><br><span class="line"><span class="type">processlist</span> <span class="comment">#显示活动线程列表</span></span><br><span class="line"><span class="type">reload</span> <span class="comment">#刷新授权信息</span></span><br><span class="line"><span class="type">refresh</span> <span class="comment">#刷新所有数据表，重新打开日志文件</span></span><br><span class="line"><span class="type">shutdown</span> <span class="comment">#关闭服务</span></span><br><span class="line"><span class="type">status</span> <span class="comment">#简短显示服务端状态</span></span><br><span class="line"><span class="built_in">start-slave</span> <span class="comment">#开启主从同步</span></span><br><span class="line"><span class="built_in">stop-slave</span> <span class="comment">#停止主从同步</span></span><br><span class="line"><span class="type">variables</span>             <span class="comment">#显示服务端所有变量</span></span><br><span class="line"><span class="type">version</span> <span class="comment">#显示客户端和服务端版本</span></span><br></pre></td></tr></table></figure>

<p>mysql信息显示</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin <span class="literal">-V</span>  客户端版本  </span><br><span class="line">mysqladmin version  服务端版本信息</span><br><span class="line">mysqladmin status  显示状态信息</span><br><span class="line">mysqladmin <span class="literal">--connect-timeout</span>=<span class="number">2</span> ping  测试主机服务存活性  </span><br></pre></td></tr></table></figure>

<p>数据库操作</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin create db1  创建数据库</span><br><span class="line">mysqladmin drop db3306  删除数据库(一次只能删一个)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>mycli</strong> <strong>工具</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MyCLI 是基于 Python 开发的 MySQL 的命令行工具，具有自动完成和语法突出显示功能</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="SQL-语言"><a href="#SQL-语言" class="headerlink" title="SQL 语言"></a><strong>SQL</strong> <strong>语言</strong></h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">关系数据库的构成</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th><strong>组件</strong></th>
<th><strong>关键字</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>数据库</td>
<td>database</td>
<td>表的集合，一个数据库中可以有多个表，在文件系统中表现为一个目录</td>
</tr>
<tr>
<td>表</td>
<td>table</td>
<td>在数据库中以二维表的形式出现，有行和列，数据库中的数据就是存放于表中的</td>
</tr>
<tr>
<td>索引</td>
<td>index</td>
<td>索引通常建立在一个列上，用以加快数据查询速度</td>
</tr>
<tr>
<td>视图</td>
<td>view</td>
<td>用 SQL 语言构建的虚拟表，可以临时把两个或多个表以逻辑关系关联，对外提供查询</td>
</tr>
<tr>
<td>存储过程</td>
<td>procedure</td>
<td>存储过程是一组为了完成特定功能的 SQL 语句集合，客户端可以直接调用</td>
</tr>
<tr>
<td>存储函数</td>
<td>function</td>
<td>存储函数和存储过程一样，都是 SQL 语句集合，但可以使用参数</td>
</tr>
<tr>
<td>触发器</td>
<td>trigger</td>
<td>触发器也是由 SQL 语句的集合组成，但需要达到触发条件才能调用</td>
</tr>
<tr>
<td>事件调度器</td>
<td>event scheduler</td>
<td>数据库中的计划任务</td>
</tr>
<tr>
<td>用户</td>
<td>user</td>
<td>连接服务端时的用户名</td>
</tr>
<tr>
<td>权限</td>
<td>privilege</td>
<td>每个用户可以对哪些数据库或表进行操作，以及在什么 IP 下能连接</td>
</tr>
</tbody></table>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SQL：( Structured Query Language ) 结构化查询语言</span><br><span class="line"></span><br><span class="line">SQL 语言规范:</span><br><span class="line">- 在数据库系统中，SQL 语句不区分大小写，建议用大写。</span><br><span class="line">- SQL语句可单行或多行书写，默认以 <span class="string">&quot; ; &quot;</span> 结尾。</span><br><span class="line">- 关键词不能跨多行或简写。</span><br><span class="line">- 用空格和TAB 缩进来提高语句的可读性。</span><br><span class="line">- 子句通常位于独立行，便于编辑，提高可读性。</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">@</span>符号:</span><br><span class="line">在 SQL 中，特别是在 MySQL 和 MariaDB 这样的数据库系统中，<span class="selector-tag">@</span><span class="selector-tag">@</span> 前缀用于访问系统变量（system variables）。系统变量是数据库服务器在运行时维护的一组值，这些值可以影响服务器的操作或提供有关服务器状态的信息。</span><br></pre></td></tr></table></figure>

<h2 id="SQL-语句"><a href="#SQL-语句" class="headerlink" title="SQL 语句"></a><strong>SQL</strong> <strong>语句</strong></h2><h4 id="类型简介"><a href="#类型简介" class="headerlink" title="类型简介"></a><strong>类型简介</strong></h4><table>
<thead>
<tr>
<th><strong>SQL 语句类型</strong></th>
<th><strong>说明</strong></th>
<th><strong>具体语句</strong></th>
</tr>
</thead>
<tbody><tr>
<td>DDL</td>
<td>Data Definition Language 数据定义语言</td>
<td>CREATE, DROP, ALTER</td>
</tr>
<tr>
<td>DML</td>
<td>Data Manipulation Language 数据操作语言</td>
<td>INSERT, DELETE, UPDATE</td>
</tr>
<tr>
<td>DQL</td>
<td>Data Query Language 数据查询语言</td>
<td>SELECT</td>
</tr>
<tr>
<td>DCL</td>
<td>Data Control Language 数据控制语言</td>
<td>GRANT, REVOKE</td>
</tr>
<tr>
<td>TCL</td>
<td>Transaction Control Language 事务控制语言</td>
<td>BEGIN, COMMIT, ROLLBACK, SAVEPOINT</td>
</tr>
</tbody></table>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">示例:</span><br><span class="line"><span class="built_in">select</span> host,user,password from mysql.user <span class="built_in">where</span> Password =<span class="string">&#x27;1&#x27;</span>;</span><br><span class="line">SHOW DATABASES; 查看数据库列表</span><br><span class="line">create database testdb1;  创建一个名叫testdb1的数据库</span><br><span class="line">修改数据库命令格式:</span><br><span class="line">ALTER &#123;DATABASE | SCHEMA&#125; [<span class="type">db_name</span>]</span><br><span class="line">   alter_specification ...</span><br><span class="line">ALTER &#123;DATABASE | SCHEMA&#125; db_name</span><br><span class="line">   UPGRADE <span class="keyword">DATA</span> DIRECTORY NAME</span><br><span class="line">alter_specification:</span><br><span class="line">   [<span class="type">DEFAULT</span>] CHARACTER <span class="built_in">SET</span> [=] charset_name</span><br><span class="line"> | [<span class="type">DEFAULT</span>] COLLATE [=] collation_name</span><br><span class="line">删除数据库命令格式:</span><br><span class="line">DROP DATABASE|SCHEMA [<span class="type">IF</span> <span class="type">EXISTS</span>] <span class="string">&#x27;DB_NAME&#x27;</span>;</span><br><span class="line">DROP DATABASE testdb2;</span><br><span class="line">DROP DATABASE <span class="keyword">IF</span> EXISTS testdb1;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(<span class="type">none</span>)]&gt; SHOW DATABASES;</span><br><span class="line">+<span class="literal">--------------------</span>+</span><br><span class="line">| Database           |</span><br><span class="line">+<span class="literal">--------------------</span>+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql             |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">+<span class="literal">--------------------</span>+</span><br><span class="line"><span class="number">4</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line">information_schema:</span><br><span class="line"> 这是一个特殊的系统数据库，包含了关于其他数据库的信息，如表结构、列信息、索引、权限等。您不能</span><br><span class="line">在这个数据库中直接存储用户数据，但它对于获取关于数据库服务器的元数据非常有用。</span><br><span class="line">mysql:</span><br><span class="line"> 这个数据库通常用于存储MariaDB服务器的系统级信息，如用户账户、权限、存储过程和事件等。它是</span><br><span class="line">MariaDB服务器正常运行所必需的，您应该避免直接修改这个数据库中的表，除非您完全了解这些表的作用和</span><br><span class="line">如何安全地修改它们。</span><br><span class="line">performance_schema:</span><br><span class="line"> 这个数据库提供了关于MariaDB服务器性能的信息，如查询执行时间、锁等待、表I/O等。它可以帮助数</span><br><span class="line">据库管理员监控和优化数据库的性能。与information_schema一样，您不应该在这个数据库中存储用户数</span><br><span class="line">据。</span><br><span class="line">test:</span><br><span class="line"> 这是一个默认创建的空数据库，通常用于测试目的。您可以在这个数据库中创建表、插入数据等，以进行</span><br><span class="line">数据库操作的学习或测试，而不会影响其他重要的数据库。</span><br></pre></td></tr></table></figure>

<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">MySQL 支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</span><br><span class="line">数值型:</span><br><span class="line">MySQL 支持所有标准 SQL 数值数据类型。</span><br><span class="line">    原则上来说，<span class="number">1</span>个int <span class="number">4</span>个字节，一个字节<span class="number">8</span>位，所以一个int占<span class="number">32</span>位，一个bit位能表示两个数字<span class="number">0</span>和<span class="number">1</span>，所以一个int能够表示 <span class="number">0</span> ~ <span class="number">2</span>^<span class="number">32</span> <span class="literal">-1</span> 的数字范围。</span><br><span class="line"></span><br><span class="line">整数型:</span><br><span class="line">这些类型包括严格数值数据类型(INTEGER、SMALLINT、DECIMAL 和 NUMERIC)，以及近似数值数据类型(FLOAT、REAL 和 DOUBLE PRECISION)。</span><br><span class="line">BOOL:</span><br><span class="line"> BOOLEAN：布尔型，是TINYINT(<span class="number">1</span>)的同义词。zero值被视为假，非zero值视为真。</span><br><span class="line"></span><br><span class="line">日期和时间型:</span><br><span class="line">表示时间值的日期和时间类型为DATETIME、DATE、TIMESTAMP、TIME和YEAR。</span><br><span class="line">每个时间类型有一个有效值范围和一个<span class="string">&quot;零&quot;</span>值，当指定不合法的MySQL不能表示的值时使用<span class="string">&quot;零&quot;</span>值。</span><br><span class="line">TIMESTAMP 类型有专有的自动更新特性。即这条记录，如果有字段是 TIMESTAMP 类型，那该记录更新后，TIMESTAMP 会自动更新。</span><br><span class="line"></span><br><span class="line">字符串类型:</span><br><span class="line">字符串类型指CHAR、VARCHAR、BINARY、VARBINARY、BLOB、TEXT、<span class="class"><span class="keyword">ENUM</span>和<span class="title">SET</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"></span></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">char 和 varchar</span><br><span class="line">  char(n) 和 varchar(n) 中括号中 n 代表字符的个数，并不代表字节个数，比如 CHAR(<span class="number">30</span>) 就可以存储 <span class="number">30</span> 个字符。</span><br><span class="line">  CHAR 和 VARCHAR 类型类似，但它们保存和检索的方式不同。</span><br><span class="line">    - 它们的最大长度和是否尾部空格被保留等方面也不同。在存储或检索过程中不进行大小写转换。</span><br><span class="line">    - char 类型的字符串检索速度要比 varchar 类型的快。</span><br><span class="line">    - 对于数据处理的长度也有区别</span><br><span class="line">      char(n)  若存入字符数小于 n，则以空格补于其后，查询之时再将空格去掉，所以 char 类型存储的字符串末尾不能有空格，varchar 不限于此。</span><br><span class="line">      char(n)  是固定长度，char(<span class="number">4</span>) 不管是存入几个字符，都将占用<span class="number">4</span>个字节，varchar 是存入的实际字符数+<span class="number">1</span> 个字节（<span class="number">0</span>&lt; n&gt;<span class="number">255</span>)，所以varchar(<span class="number">4</span>)，存入<span class="number">3</span>个字符将占用<span class="number">4</span>个字节。</span><br></pre></td></tr></table></figure>



<p>char 和 varchar 在存储层面，节省一些字符空间</p>
<table>
<thead>
<tr>
<th>真实值</th>
<th><strong>CHAR(4)中存储的内容</strong></th>
<th><strong>CHAR(4)存储用的空间</strong></th>
<th><strong>VARCHAR(4)中存储的内容</strong></th>
<th><strong>VARCHAR(4)存储占用的空间</strong></th>
</tr>
</thead>
<tbody><tr>
<td>“”</td>
<td>‘—-‘ 表示1个空格</td>
<td>4 字节</td>
<td>‘-‘</td>
<td>1 字节</td>
</tr>
<tr>
<td>‘ab’</td>
<td>‘ab–’</td>
<td>4 字节</td>
<td>‘ab-‘</td>
<td>3 字节</td>
</tr>
<tr>
<td>‘abcd’</td>
<td>‘abcd’</td>
<td>4 字节</td>
<td>‘abcd-‘</td>
<td>5 字节</td>
</tr>
<tr>
<td>‘abcde’</td>
<td>‘abcd’</td>
<td>4 字节</td>
<td>‘abcd-‘</td>
<td>5 字节</td>
</tr>
</tbody></table>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">加入有一串字符串分别使用 char 和 varchar 方式进行存储，他们的表现样式如下：</span><br><span class="line"> a<span class="literal">---ab--abc-abcd</span> <span class="comment"># char样式</span></span><br><span class="line"> a<span class="literal">-ab-abc-abcd-</span> <span class="comment"># varchar样式</span></span><br><span class="line">看起来是varchar节省了空间，但是当我们的存储数据发生改变了，比如说第一个a变成了xyz</span><br><span class="line"> xyz<span class="literal">-ab--abc-abcd</span> <span class="comment"># char样式因为留有空间，所以可以随时替换</span></span><br><span class="line"> a<span class="literal">-ab-abc-abcd-</span> <span class="comment"># varchar样式因为数据没有空闲空间，所以需要一个额外的空间保留xyz</span></span><br><span class="line">   <span class="comment"># 所以，a-的旧数据就变成了数据碎片，没有太大的作用了。</span></span><br><span class="line">   <span class="comment"># 如果后来 xyz 更换成了A，那么xyz 就变成了碎片，原来的数据就变成了</span></span><br><span class="line">   <span class="comment"># A-ab-abc-abcd￾</span></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">varchar 和 text</span><br><span class="line">varchar 可指定 n，text 不能指定，</span><br><span class="line">  内部存储 varchar 是存入的实际字符数+<span class="number">1</span>个字节（<span class="number">1</span>&lt; n&gt;<span class="number">255</span>)，</span><br><span class="line">  text 是实际字符数+<span class="number">2</span>个字节。</span><br><span class="line">text 类型不能有默认值。</span><br><span class="line">varchar 可直接创建索引，text 创建索引要指定前多少个字符。</span><br><span class="line">varchar 查询速度快于 text。</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">二进制数据BLOB</span><br><span class="line">BLOB 和 text 存储方式不同，</span><br><span class="line"> - TEXT 以文本方式存储，英文存储区分大小写，</span><br><span class="line"> - Blob 以二进制方式存储，不分大小写</span><br><span class="line"> </span><br><span class="line">BLOB 存储的数据只能整体读出。</span><br><span class="line">TEXT 可以指定字符集，BLOB 不用指定字符集。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">BINARY 和 VARBINARY 类似于 CHAR 和 VARCHAR</span><br><span class="line">不同的是它们包含二进制字符串而不要非二进制字符串。也就是说，它们包含字节字符串而不是字符字符串。</span><br><span class="line"> 这说明它们没有字符集，并且排序和比较基于列值字节的数值。</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>数据类型</th>
<th>占用空间大小</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>CHAR</td>
<td>0, 255 字节</td>
<td>定长字符串</td>
</tr>
<tr>
<td>VARCHAR</td>
<td>0, 65535 字节</td>
<td>变长字符串</td>
</tr>
<tr>
<td>TINYBLOB</td>
<td>0, 255 字节</td>
<td>不超过 255 个字符的二进制字符串</td>
</tr>
<tr>
<td>TINYTEXT</td>
<td>0, 255 字节</td>
<td>短文本字符串</td>
</tr>
<tr>
<td>BLOB</td>
<td>0, 255 字节</td>
<td>二进制形式的长文本数据</td>
</tr>
<tr>
<td>TEXT</td>
<td>0, 65535 字节</td>
<td>长文本数据</td>
</tr>
<tr>
<td>MEDIUMBLOB</td>
<td>0, 16777215 字节</td>
<td>二进制形式的中等长度文本数据</td>
</tr>
<tr>
<td>MEDIUMTEXT</td>
<td>0, 16777215 字节</td>
<td>中等长度文本数据</td>
</tr>
<tr>
<td>LONGBLOB</td>
<td>0, 294967295 字节</td>
<td>二进制形式的极大文本数据</td>
</tr>
<tr>
<td>LONGTEXT</td>
<td>0, 4294967295 字节</td>
<td>极大文本数据</td>
</tr>
</tbody></table>
<p>选择正确的数据类型对于获得高性能至关重要</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 更小的通常更好，尽量使用可正确存储数据的最小数据类型</span><br><span class="line">- 简单就好，简单数据类型的操作通常需要更少的CPU周期</span><br><span class="line">- 尽量避免NULL，包含为NULL的列，对MySQL更难优化</span><br></pre></td></tr></table></figure>

<h4 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">适用所有类型的修饰符</span><br><span class="line"></span><br><span class="line">| 修饰符             | 说明                                                     |</span><br><span class="line">| <span class="literal">------------------</span> | <span class="literal">--------------------------------------------------------</span> |</span><br><span class="line">| NULL               | 数据列可包含 NULL 值，默认值                             |</span><br><span class="line">| NOT NULL           | 数据列不允许包含 NULL 值                                 |</span><br><span class="line">| DEFAULT            | 指定默认值                                               |</span><br><span class="line">| PRIMARY KEY        | 主键，所有记录中此字段的值不能重复，且不能为空（NULL）   |</span><br><span class="line">| UNIQUE KEY         | 唯一键，所有记录中此字段的值不能重复，但可以为空（NULL） |</span><br><span class="line">| CHARACTER <span class="built_in">SET</span> name | 指定一个字符集                                           |</span><br><span class="line"></span><br><span class="line">适用数值型的修饰符</span><br><span class="line"></span><br><span class="line">| 修饰符         | 说明                                                         |</span><br><span class="line">| <span class="literal">--------------</span> | <span class="literal">------------------------------------------------------------</span> |</span><br><span class="line">| AUTO_INCREMENT | 自动递增，适用于整数类型，必须作用于某个 key 的字段，比如 primary key |</span><br><span class="line">| UNSIGNED       | 无符号                                                       |</span><br><span class="line"></span><br><span class="line"><span class="comment">##  DDL 语句</span></span><br><span class="line"></span><br><span class="line">```powershell</span><br><span class="line">DDL 语句主要用来操作数据库中的表。</span><br><span class="line">同一个库中不同表可以使用不同的存储引擎，但建议使用同一种存储引擎.</span><br><span class="line"></span><br><span class="line">查看表:</span><br><span class="line">SHOW [<span class="type">FULL</span>] TABLES [&#123;<span class="type">FROM</span> | <span class="type">IN</span>&#125; <span class="type">db_name</span>]</span><br><span class="line">   [<span class="type">LIKE</span> <span class="string">&#x27;pattern&#x27;</span> | <span class="type">WHERE</span> <span class="type">expr</span>]</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看表的基本结构</span><br><span class="line">DESC [<span class="type">db_name.</span>]tb_name</span><br><span class="line">查看表有哪些字段组成</span><br><span class="line">SHOW COLUMNS FROM [<span class="type">db_name.</span>]tb_name</span><br><span class="line">注意：</span><br><span class="line"> 上面的两种信息，查看的效果是一样的。</span><br><span class="line"> </span><br><span class="line">创建表:</span><br><span class="line">直接创建</span><br><span class="line">CREATE TABLE [<span class="type">IF</span> <span class="type">NOT</span> <span class="type">EXISTS</span>] <span class="string">&#x27;tbl_name&#x27;</span> (col1 type1 修饰符, col2 type2 修饰符, ...)</span><br><span class="line"><span class="comment">#字段格式</span></span><br><span class="line">col type1 <span class="comment">#定义字段数据类型</span></span><br><span class="line">PRIMARY KEY(col1,...) <span class="comment">#将该字段设为主键</span></span><br><span class="line">INDEX(col1, ...) <span class="comment">#设置为索引</span></span><br><span class="line">UNIQUE KEY(col1, ...) <span class="comment">#设置为联合主键</span></span><br><span class="line"><span class="comment">#表选项</span></span><br><span class="line">ENGINE [=] engine_name</span><br><span class="line">ROW_FORMAT [=] &#123;DEFAULT|DYNAMIC|FIXED|COMPRESSED|REDUNDANT|COMPACT&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>示例:</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">查看数据库信息</span><br><span class="line">MariaDB root<span class="selector-tag">@</span>(none):(none)&gt; show databases;</span><br><span class="line">+<span class="literal">--------------------</span>+</span><br><span class="line">| Database           |</span><br><span class="line">+<span class="literal">--------------------</span>+</span><br><span class="line">| db3306             |</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">+<span class="literal">--------------------</span>+</span><br><span class="line"></span><br><span class="line"><span class="number">5</span> rows <span class="keyword">in</span> <span class="built_in">set</span></span><br><span class="line">Time: <span class="number">0.007</span>s</span><br><span class="line"></span><br><span class="line">在数据库外面查看所有表</span><br><span class="line">MariaDB root<span class="selector-tag">@</span>(none):(none)&gt; show tables <span class="keyword">in</span> mysql;</span><br><span class="line">+<span class="literal">---------------------------</span>+</span><br><span class="line">| Tables_in_mysql           |</span><br><span class="line">+<span class="literal">---------------------------</span>+</span><br><span class="line">| column_stats              |</span><br><span class="line">| columns_priv              |</span><br><span class="line">| db                        |</span><br><span class="line">| event                     |</span><br><span class="line">| func                      |</span><br><span class="line">| general_log               |</span><br><span class="line">| global_priv               |</span><br><span class="line">| gtid_slave_pos            |</span><br><span class="line">| help_category             |</span><br><span class="line">| help_keyword              |</span><br><span class="line">| help_relation             |</span><br><span class="line">| help_topic                |</span><br><span class="line">| index_stats               |</span><br><span class="line">| innodb_index_stats        |</span><br><span class="line">| innodb_table_stats        |</span><br><span class="line">| plugin                    |</span><br><span class="line">| proc                      |</span><br><span class="line">| procs_priv                |</span><br><span class="line">| proxies_priv              |</span><br><span class="line">| roles_mapping             |</span><br><span class="line">| servers                   |</span><br><span class="line">| slow_log                  |</span><br><span class="line">| table_stats               |</span><br><span class="line">| tables_priv               |</span><br><span class="line">| time_zone                 |</span><br><span class="line">| time_zone_leap_second     |</span><br><span class="line">| time_zone_name            |</span><br><span class="line">| time_zone_transition      |</span><br><span class="line">| time_zone_transition_type |</span><br><span class="line">| transaction_registry      |</span><br><span class="line">| user                      |</span><br><span class="line">+<span class="literal">---------------------------</span>+</span><br><span class="line"></span><br><span class="line"><span class="number">31</span> rows <span class="keyword">in</span> <span class="built_in">set</span></span><br><span class="line">Time: <span class="number">0.005</span>s</span><br><span class="line"></span><br><span class="line">进入数据库</span><br><span class="line">MariaDB root<span class="selector-tag">@</span>(none):(none)&gt; use mysql;</span><br><span class="line">You are now connected to database <span class="string">&quot;mysql&quot;</span> as user <span class="string">&quot;root&quot;</span></span><br><span class="line">Time: <span class="number">0.000</span>s</span><br><span class="line"></span><br><span class="line">查看表结构信息</span><br><span class="line">MariaDB root<span class="selector-tag">@</span>(none):mysql&gt; desc servers;</span><br><span class="line">+<span class="literal">-------------</span>+<span class="literal">---------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">-------</span>+</span><br><span class="line">| Field       | <span class="built_in">Type</span>          | Null | Key | Default | Extra |</span><br><span class="line">+<span class="literal">-------------</span>+<span class="literal">---------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">-------</span>+</span><br><span class="line">| Server_name | char(<span class="number">64</span>)      | NO   | PRI |         |       |</span><br><span class="line">| Host        | varchar(<span class="number">2048</span>) | NO   |     |         |       |</span><br><span class="line">| Db          | char(<span class="number">64</span>)      | NO   |     |         |       |</span><br><span class="line">| Username    | char(<span class="number">80</span>)      | NO   |     |         |       |</span><br><span class="line">| Password    | char(<span class="number">64</span>)      | NO   |     |         |       |</span><br><span class="line">| Port        | int(<span class="number">4</span>)        | NO   |     | <span class="number">0</span>       |       |</span><br><span class="line">| Socket      | char(<span class="number">64</span>)      | NO   |     |         |       |</span><br><span class="line">| Wrapper     | char(<span class="number">64</span>)      | NO   |     |         |       |</span><br><span class="line">| Owner       | varchar(<span class="number">512</span>)  | NO   |     |         |       |</span><br><span class="line">+<span class="literal">-------------</span>+<span class="literal">---------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">-------</span>+</span><br><span class="line"></span><br><span class="line"><span class="number">9</span> rows <span class="keyword">in</span> <span class="built_in">set</span></span><br><span class="line">Time: <span class="number">0.005</span>s</span><br><span class="line"></span><br><span class="line">查看表的基本字段信息</span><br><span class="line">MariaDB root<span class="selector-tag">@</span>(none):mysql&gt; show columns from servers;</span><br><span class="line">+<span class="literal">-------------</span>+<span class="literal">---------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">-------</span>+</span><br><span class="line">| Field       | <span class="built_in">Type</span>          | Null | Key | Default | Extra |</span><br><span class="line">+<span class="literal">-------------</span>+<span class="literal">---------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">-------</span>+</span><br><span class="line">| Server_name | char(<span class="number">64</span>)      | NO   | PRI |         |       |</span><br><span class="line">| Host        | varchar(<span class="number">2048</span>) | NO   |     |         |       |</span><br><span class="line">| Db          | char(<span class="number">64</span>)      | NO   |     |         |       |</span><br><span class="line">| Username    | char(<span class="number">80</span>)      | NO   |     |         |       |</span><br><span class="line">| Password    | char(<span class="number">64</span>)      | NO   |     |         |       |</span><br><span class="line">| Port        | int(<span class="number">4</span>)        | NO   |     | <span class="number">0</span>       |       |</span><br><span class="line">| Socket      | char(<span class="number">64</span>)      | NO   |     |         |       |</span><br><span class="line">| Wrapper     | char(<span class="number">64</span>)      | NO   |     |         |       |</span><br><span class="line">| Owner       | varchar(<span class="number">512</span>)  | NO   |     |         |       |</span><br><span class="line">+<span class="literal">-------------</span>+<span class="literal">---------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">-------</span>+</span><br><span class="line"></span><br><span class="line"><span class="number">9</span> rows <span class="keyword">in</span> <span class="built_in">set</span></span><br><span class="line">Time: <span class="number">0.005</span>s</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">创建表的基本流程 <span class="literal">--</span> 进入库，然后创建表</span><br><span class="line">创建数据库</span><br><span class="line">MariaDB [(<span class="type">none</span>)]&gt; create database db1;</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.002</span> sec)</span><br><span class="line">选择数据库</span><br><span class="line">MariaDB [(<span class="type">none</span>)]&gt; use db1;</span><br><span class="line">Database changed</span><br><span class="line">进入数据库后，创建数据表</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; CREATE TABLE student (</span><br><span class="line">    -&gt; id int UNSIGNED AUTO_INCREMENT PRIMARY KEY,</span><br><span class="line">    -&gt; name VARCHAR(<span class="number">20</span>) NOT NULL,</span><br><span class="line">    -&gt; age tinyint UNSIGNED,</span><br><span class="line">    -&gt; <span class="comment">#height DECIMAL(5,2),</span></span><br><span class="line">    -&gt; gender <span class="class"><span class="keyword">ENUM</span>(&#x27;<span class="title">M</span>&#x27;,&#x27;<span class="title">F</span>&#x27;) <span class="title">default</span> &#x27;<span class="title">M</span>&#x27;</span></span><br><span class="line"><span class="class">    -&gt; )<span class="title">ENGINE</span>=<span class="title">InnoDB</span> <span class="title">AUTO_INCREMENT</span>=10 <span class="title">DEFAULT</span> <span class="title">CHARSET</span>=<span class="title">utf8mb4</span>;</span></span><br><span class="line"><span class="class"><span class="title">Query</span> <span class="title">OK</span>, 0 <span class="title">rows</span> <span class="title">affected</span> (0.028 <span class="title">sec</span>)</span></span><br><span class="line"><span class="class">查看表</span></span><br><span class="line"><span class="class"><span class="title">MariaDB</span> [<span class="title">db1</span>]&gt; <span class="title">show</span> <span class="title">tables</span>;</span></span><br><span class="line"><span class="class">+---------------+</span></span><br><span class="line"><span class="class">| <span class="title">Tables_in_db1</span> |</span></span><br><span class="line"><span class="class">+---------------+</span></span><br><span class="line"><span class="class">| <span class="title">student</span>       |</span></span><br><span class="line"><span class="class">+---------------+</span></span><br><span class="line"><span class="class">1 <span class="title">row</span> <span class="title">in</span> <span class="title">set</span> (0.001 <span class="title">sec</span>)</span></span><br></pre></td></tr></table></figure>

<p>复制方式创建表</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">特点： 这种方式，创建的数据表，如果源数据表内有数据的话，复制表里面也会有数据查看数据表结构</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; create table user1 <span class="built_in">select</span> Host,User,Password from mysql.user;</span><br><span class="line">Query OK, <span class="number">5</span> rows affected (<span class="number">0.003</span> sec)</span><br><span class="line">Records: <span class="number">5</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; show tables;</span><br><span class="line">+<span class="literal">---------------</span>+</span><br><span class="line">| Tables_in_db1 |</span><br><span class="line">+<span class="literal">---------------</span>+</span><br><span class="line">| student       |</span><br><span class="line">| user1         |</span><br><span class="line">+<span class="literal">---------------</span>+</span><br><span class="line"><span class="number">2</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>基于复制方式创建表-仅结构</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">通过like方式创建表</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt;  create table user2 like user1;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.009</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; show tables;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看建表语句格式</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SHOW CREATE TABLE [<span class="type">db_name.</span>]tbl_name</span><br><span class="line">查看user2表的创建语法</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; show create table user2\G</span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line">       Table: user2</span><br><span class="line">Create Table: CREATE TABLE `user2` (</span><br><span class="line">  `Host` char(<span class="number">60</span>) CHARACTER <span class="built_in">SET</span> utf8 COLLATE utf8_bin NOT NULL,</span><br><span class="line">  `User` char(<span class="number">80</span>) CHARACTER <span class="built_in">SET</span> utf8 COLLATE utf8_bin NOT NULL,</span><br><span class="line">  `Password` longtext CHARACTER <span class="built_in">SET</span> utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看表的基本状态</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SHOW TABLE STATUS LIKE <span class="string">&#x27;tb_name&#x27;</span> <span class="comment"># 查看一个表的状态,表名外侧有单引号</span></span><br><span class="line">SHOW TABLE STATUS FROM db_name <span class="comment"># 查看一个库里面所有表的状态</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">查看user1表的的状态</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; show table status like <span class="string">&#x27;user1&#x27;</span>\G</span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line">            Name: user1</span><br><span class="line">          Engine: InnoDB</span><br><span class="line">         Version: <span class="number">10</span></span><br><span class="line">      Row_format: Dynamic</span><br><span class="line">            Rows: <span class="number">5</span></span><br><span class="line">  Avg_row_length: <span class="number">3276</span></span><br><span class="line">     Data_length: <span class="number">16384</span></span><br><span class="line"> Max_data_length: <span class="number">0</span></span><br><span class="line">    Index_length: <span class="number">0</span></span><br><span class="line">       Data_free: <span class="number">0</span></span><br><span class="line">  Auto_increment: NULL</span><br><span class="line">     Create_time: <span class="number">2025</span><span class="literal">-03-08</span> <span class="number">15</span>:<span class="number">21</span>:<span class="number">59</span></span><br><span class="line">     Update_time: <span class="number">2025</span><span class="literal">-03-08</span> <span class="number">15</span>:<span class="number">21</span>:<span class="number">59</span></span><br><span class="line">      Check_time: NULL</span><br><span class="line">       Collation: latin1_swedish_ci</span><br><span class="line">        Checksum: NULL</span><br><span class="line">  Create_options:</span><br><span class="line">         Comment:</span><br><span class="line">Max_index_length: <span class="number">0</span></span><br><span class="line">       Temporary: N</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">查看db1库里的所有表的状态</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; show table status like <span class="string">&#x27;user1&#x27;</span>\G</span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line">            Name: user1</span><br><span class="line">          Engine: InnoDB</span><br><span class="line">         Version: <span class="number">10</span></span><br><span class="line">      Row_format: Dynamic</span><br><span class="line">            Rows: <span class="number">5</span></span><br><span class="line">  Avg_row_length: <span class="number">3276</span></span><br><span class="line">     Data_length: <span class="number">16384</span></span><br><span class="line"> Max_data_length: <span class="number">0</span></span><br><span class="line">    Index_length: <span class="number">0</span></span><br><span class="line">       Data_free: <span class="number">0</span></span><br><span class="line">  Auto_increment: NULL</span><br><span class="line">     Create_time: <span class="number">2025</span><span class="literal">-03-08</span> <span class="number">15</span>:<span class="number">21</span>:<span class="number">59</span></span><br><span class="line">     Update_time: <span class="number">2025</span><span class="literal">-03-08</span> <span class="number">15</span>:<span class="number">21</span>:<span class="number">59</span></span><br><span class="line">      Check_time: NULL</span><br><span class="line">       Collation: latin1_swedish_ci</span><br><span class="line">        Checksum: NULL</span><br><span class="line">  Create_options:</span><br><span class="line">         Comment:</span><br><span class="line">Max_index_length: <span class="number">0</span></span><br><span class="line">       Temporary: N</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt;  show table status from db1\G</span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line">            Name: student</span><br><span class="line">          Engine: InnoDB</span><br><span class="line">         Version: <span class="number">10</span></span><br><span class="line">      Row_format: Dynamic</span><br><span class="line">            Rows: <span class="number">0</span></span><br><span class="line">  Avg_row_length: <span class="number">0</span></span><br><span class="line">     Data_length: <span class="number">16384</span></span><br><span class="line"> Max_data_length: <span class="number">0</span></span><br><span class="line">    Index_length: <span class="number">0</span></span><br><span class="line">       Data_free: <span class="number">0</span></span><br><span class="line">  Auto_increment: <span class="number">10</span></span><br><span class="line">     Create_time: <span class="number">2025</span><span class="literal">-03-08</span> <span class="number">15</span>:<span class="number">14</span>:<span class="number">12</span></span><br><span class="line">     Update_time: NULL</span><br><span class="line">      Check_time: NULL</span><br><span class="line">       Collation: utf8mb4_general_ci</span><br><span class="line">        Checksum: NULL</span><br><span class="line">  Create_options:</span><br><span class="line">         Comment:</span><br><span class="line">Max_index_length: <span class="number">0</span></span><br><span class="line">       Temporary: N</span><br><span class="line">*************************** <span class="number">2</span>. row ***************************</span><br><span class="line">            Name: user1</span><br><span class="line">          Engine: InnoDB</span><br><span class="line">         Version: <span class="number">10</span></span><br><span class="line">      Row_format: Dynamic</span><br><span class="line">            Rows: <span class="number">5</span></span><br><span class="line">  Avg_row_length: <span class="number">3276</span></span><br><span class="line">     Data_length: <span class="number">16384</span></span><br><span class="line"> Max_data_length: <span class="number">0</span></span><br><span class="line">    Index_length: <span class="number">0</span></span><br><span class="line">       Data_free: <span class="number">0</span></span><br><span class="line">  Auto_increment: NULL</span><br><span class="line">     Create_time: <span class="number">2025</span><span class="literal">-03-08</span> <span class="number">15</span>:<span class="number">21</span>:<span class="number">59</span></span><br><span class="line">     Update_time: <span class="number">2025</span><span class="literal">-03-08</span> <span class="number">15</span>:<span class="number">21</span>:<span class="number">59</span></span><br><span class="line">      Check_time: NULL</span><br><span class="line">       Collation: latin1_swedish_ci</span><br><span class="line">        Checksum: NULL</span><br><span class="line">  Create_options:</span><br><span class="line">         Comment:</span><br><span class="line">Max_index_length: <span class="number">0</span></span><br><span class="line">       Temporary: N</span><br><span class="line">*************************** <span class="number">3</span>. row ***************************</span><br><span class="line">            Name: user2</span><br><span class="line">          Engine: InnoDB</span><br><span class="line">         Version: <span class="number">10</span></span><br><span class="line">      Row_format: Dynamic</span><br><span class="line">            Rows: <span class="number">0</span></span><br><span class="line">  Avg_row_length: <span class="number">0</span></span><br><span class="line">     Data_length: <span class="number">16384</span></span><br><span class="line"> Max_data_length: <span class="number">0</span></span><br><span class="line">    Index_length: <span class="number">0</span></span><br><span class="line">       Data_free: <span class="number">0</span></span><br><span class="line">  Auto_increment: NULL</span><br><span class="line">     Create_time: <span class="number">2025</span><span class="literal">-03-08</span> <span class="number">15</span>:<span class="number">24</span>:<span class="number">30</span></span><br><span class="line">     Update_time: NULL</span><br><span class="line">      Check_time: NULL</span><br><span class="line">       Collation: latin1_swedish_ci</span><br><span class="line">        Checksum: NULL</span><br><span class="line">  Create_options:</span><br><span class="line">         Comment:</span><br><span class="line">Max_index_length: <span class="number">0</span></span><br><span class="line">       Temporary: N</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="查看表所支持的引擎"><a href="#查看表所支持的引擎" class="headerlink" title="查看表所支持的引擎"></a>查看表所支持的引擎</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">存储引擎决定了数据如何被存储、读取、更新和删除。它是数据库的核心服务之一，用于存储、处理和保护数据，同时控制对数据的访问权限并快速处理事务。</span><br><span class="line">简单来说，存储引擎就是如何把数据存到文件系统中，然后如何从文件系统中读取数据到内存里面。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看当前MySQL服务支持的引擎</span><br><span class="line">SHOW ENGINES</span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>![image-20250308160739595](..&#x2F;image&#x2F;MySQL 数据库&#x2F;image-20250308160739595.png)</p>
<p>数据库引擎的解读</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Aria:</span><br><span class="line"> Aria是MyISAM的改进版，提供了崩溃安全的表，并继承了MyISAM的特性。</span><br><span class="line"> 它主要用于内部临时表和权限表。不支持事务。</span><br><span class="line">MRG_MyISAM:</span><br><span class="line"> MRG_MyISAM是MyISAM表的集合，允许将多个MyISAM表合并为一个虚拟表。不支持事务。</span><br><span class="line">MEMORY:</span><br><span class="line"> MEMORY存储引擎基于哈希表，数据存储在内存中，非常适合用于临时表。不支持事务。</span><br><span class="line">BLACKHOLE:</span><br><span class="line"> BLACKHOLE引擎就像一个黑洞，任何写入它的数据都会消失，类似于Unix/Linux中的/dev/null。不</span><br><span class="line">支持事务。</span><br><span class="line">MyISAM:</span><br><span class="line"> MyISAM是非事务性存储引擎，具有良好的性能和较小的数据占用空间。不支持事务。</span><br><span class="line">CSV:</span><br><span class="line"> CSV存储引擎将表存储为CSV文件，非常适合与其他系统进行数据交换。不支持事务。</span><br><span class="line">ARCHIVE:</span><br><span class="line"> ARCHIVE引擎通过gzip压缩表来减少存储占用空间，非常适合存储历史数据。不支持事务。</span><br><span class="line">FEDERATED:</span><br><span class="line"> FEDERATED引擎允许访问其他MariaDB服务器上的表，支持事务和其他高级功能。</span><br><span class="line">PERFORMANCE_SCHEMA:</span><br><span class="line"> PERFORMANCE_SCHEMA存储引擎用于性能监控和分析。不支持事务。</span><br><span class="line">InnoDB:</span><br><span class="line"> InnoDB是MariaDB的默认存储引擎，支持事务、行级锁定、外键和表加密。是大多数应用场景的首选。</span><br><span class="line">SEQUENCE:</span><br><span class="line"> SEQUENCE引擎生成填充有顺序值的表，非常适合需要生成唯一序列号的场景。支持事务。</span><br></pre></td></tr></table></figure>

<h4 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ALTER [<span class="type">ONLINE</span> | <span class="type">OFFLINE</span>] [<span class="type">IGNORE</span>] TABLE tbl_name</span><br><span class="line">    [<span class="type">alter_specification</span> [, <span class="type">alter_specification</span>] <span class="type">...</span>]</span><br><span class="line">    [<span class="type">partition_options</span>]</span><br><span class="line">&#123; ADD COLUMN &lt;列名&gt; &lt;类型&gt;</span><br><span class="line">| CHANGE COLUMN &lt;旧列名&gt; &lt;新列名&gt; &lt;新列类型&gt;</span><br><span class="line">| ALTER COLUMN &lt;列名&gt; &#123; <span class="built_in">SET</span> DEFAULT &lt;默认值&gt; | DROP DEFAULT &#125;</span><br><span class="line">| MODIFY COLUMN &lt;列名&gt; &lt;类型&gt;</span><br><span class="line">| DROP COLUMN &lt;列名&gt;</span><br><span class="line">| RENAME TO &lt;新表名&gt; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">修改student为stu</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; ALTER TABLE student RENAME stu;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.002</span> sec)</span><br><span class="line"></span><br><span class="line">向表中插入一个新的字段 phone，排在name字段后面</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; ALTER TABLE stu ADD phone varchar(<span class="number">11</span>) AFTER name;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.002</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">删除gender字段</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; ALTER TABLE stu DROP COLUMN gender;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.003</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>字段类型修改</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">修改数据表的phone的字段类型改为 int 类型</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt;  ALTER TABLE stu MODIFY phone int;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.012</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">修改表的phone的字段名字 改为mobile名字，类型是 char(<span class="number">11</span>)</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; ALTER TABLE stu CHANGE COLUMN phone mobile char(<span class="number">11</span>);</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.012</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="字段默认值修改"><a href="#字段默认值修改" class="headerlink" title="字段默认值修改"></a>字段默认值修改</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">修改age的默认值为<span class="number">18</span></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; alter table stu alter column age <span class="built_in">set</span> default <span class="string">&#x27;18&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.001</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">添加字段的时候，设定默认值</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt;  ALTER TABLE stu ADD is_del bool DEFAULT false;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.002</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">修改字段默认值</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; ALTER TABLE stu modify is_del bool DEFAULT true;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.001</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="主键的增删"><a href="#主键的增删" class="headerlink" title="主键的增删"></a>主键的增删</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  主键对于一个数据表来说，非常的重要，很多数据的批量操作都限制了只能依赖于主键才可以继续下去。所以，对于主键的处理，我们一定要上心，常见的主键操作，主要有以下几种样式:</span><br><span class="line"><span class="number">1</span> 为一个表的现有字段 增加|删除一个主键</span><br><span class="line"> ALTER TABLE 表名 ADD|DROP PRIMARY KEY (字段名);</span><br><span class="line"><span class="literal">---</span></span><br><span class="line"><span class="number">2</span><span class="literal">-1</span> 为一个表的 增加|删除一个 之前不存在的主键</span><br><span class="line"> ALTER TABLE 表名 ADD COLUMN id INT UNSIGNED FIRST;</span><br><span class="line"><span class="number">2</span><span class="literal">-2</span> 将一个表的现有主键进行自增属性的增加</span><br><span class="line"> ALTER TABLE 表名 MODIFY COLUMN id INT AUTO_INCREMENT PRIMARY KEY;</span><br><span class="line"> 或，将上面命令拆解成两个</span><br><span class="line"> ALTER TABLE 表名 MODIFY COLUMN 字段名 INT UNSIGNED AUTO_INCREMENT;</span><br><span class="line"> ALTER TABLE 表名 ADD PRIMARY KEY (字段名);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>示例</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [<span class="type">db1</span>]&gt; desc student2;</span><br><span class="line">+<span class="literal">-------</span>+<span class="literal">---------------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">-------</span>+</span><br><span class="line">| Field | <span class="built_in">Type</span>                | Null | Key | Default | Extra |</span><br><span class="line">+<span class="literal">-------</span>+<span class="literal">---------------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">-------</span>+</span><br><span class="line">| name  | char(<span class="number">30</span>)            | YES  |     | NULL    |       |</span><br><span class="line">| age   | tinyint(<span class="number">3</span>) unsigned | YES  |     | <span class="number">18</span>      |       |</span><br><span class="line">+<span class="literal">-------</span>+<span class="literal">---------------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">-------</span>+</span><br><span class="line"><span class="number">2</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">将name字段设置为主键</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt;  ALTER TABLE student2 ADD PRIMARY KEY (name);</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.004</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">将name主键标识从student2表中移除</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; ALTER TABLE student2 DROP PRIMARY KEY;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.012</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">为 student2 表增加一个 主键id , FIRST 代表是第一个位置</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; ALTER TABLE student2 ADD COLUMN id INT UNSIGNED FIRST;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.008</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">为student2增加一个自增主键id,类型为 无符号型</span><br><span class="line">ariaDB [<span class="type">db1</span>]&gt; ALTER TABLE student2 ADD COLUMN id INT AUTO_INCREMENT PRIMARY KEY FIRST;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.011</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; desc student2;</span><br><span class="line">+<span class="literal">-------</span>+<span class="literal">---------------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">----------------</span>+</span><br><span class="line">| Field | <span class="built_in">Type</span>                | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="literal">-------</span>+<span class="literal">---------------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">----------------</span>+</span><br><span class="line">| id    | int(<span class="number">11</span>)             | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| name  | char(<span class="number">30</span>)            | NO   |     | NULL    |                |</span><br><span class="line">| age   | tinyint(<span class="number">3</span>) unsigned | YES  |     | <span class="number">18</span>      |                |</span><br><span class="line">+<span class="literal">-------</span>+<span class="literal">---------------------</span>+<span class="literal">------</span>+<span class="literal">-----</span>+<span class="literal">---------</span>+<span class="literal">----------------</span>+</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="查看自增id的起始值"><a href="#查看自增id的起始值" class="headerlink" title="查看自增id的起始值"></a>查看自增id的起始值</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">方法<span class="number">1</span></span><br><span class="line">命令格式：</span><br><span class="line"><span class="built_in">SELECT</span> `AUTO_INCREMENT`</span><br><span class="line">FROM information_schema.TABLES</span><br><span class="line"><span class="built_in">WHERE</span> TABLE_SCHEMA = <span class="string">&#x27;数据库名&#x27;</span></span><br><span class="line">  AND TABLE_NAME = <span class="string">&#x27;数据表名&#x27;</span>;</span><br><span class="line"></span><br><span class="line">方法<span class="number">2</span>:</span><br><span class="line">命令格式：</span><br><span class="line"> SHOW CREATE TABLE 表名;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">查看db1库里面student2的自增id值</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">SELECT</span> `AUTO_INCREMENT`</span><br><span class="line">    -&gt;  FROM information_schema.TABLES</span><br><span class="line">    -&gt; <span class="built_in">WHERE</span> TABLE_SCHEMA = <span class="string">&#x27;db1&#x27;</span></span><br><span class="line">    -&gt; AND TABLE_NAME = <span class="string">&#x27;student2&#x27;</span>;</span><br><span class="line">+<span class="literal">----------------</span>+</span><br><span class="line">| AUTO_INCREMENT |</span><br><span class="line">+<span class="literal">----------------</span>+</span><br><span class="line">|              <span class="number">1</span> |</span><br><span class="line">+<span class="literal">----------------</span>+</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; SHOW CREATE TABLE stu\G</span><br><span class="line">*************************** <span class="number">1</span>. row ***************************</span><br><span class="line">       Table: stu</span><br><span class="line">Create Table: CREATE TABLE `stu` (</span><br><span class="line">  `id` int(<span class="number">10</span>) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `name` char(<span class="number">30</span>) DEFAULT NULL,</span><br><span class="line">  `mobile` char(<span class="number">11</span>) CHARACTER <span class="built_in">SET</span> utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,</span><br><span class="line">  `age` tinyint(<span class="number">3</span>) unsigned DEFAULT <span class="number">18</span>,</span><br><span class="line">  `is_del` tinyint(<span class="number">1</span>) DEFAULT <span class="number">1</span>,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=<span class="number">10</span> DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci</span><br><span class="line"><span class="number">1</span> row <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"><span class="comment"># AUTO_INCREMENT=10,自增id起始10</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="表的移除"><a href="#表的移除" class="headerlink" title="表的移除"></a>表的移除</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">删除表</span><br><span class="line">DROP [<span class="type">TEMPORARY</span>] TABLE [<span class="type">IF</span> <span class="type">EXISTS</span>]</span><br><span class="line">    tbl_name [, <span class="type">tbl_name</span>] ...</span><br><span class="line">    [<span class="type">RESTRICT</span> | <span class="type">CASCADE</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [<span class="type">db1</span>]&gt; show tables;</span><br><span class="line">+<span class="literal">---------------</span>+</span><br><span class="line">| Tables_in_db1 |</span><br><span class="line">+<span class="literal">---------------</span>+</span><br><span class="line">| stu           |</span><br><span class="line">| student       |</span><br><span class="line">| student2      |</span><br><span class="line">| user1         |</span><br><span class="line">| user2         |</span><br><span class="line">+<span class="literal">---------------</span>+</span><br><span class="line"><span class="number">5</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt;  drop table user1;drop table db1.user2;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.008</span> sec)</span><br><span class="line"></span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt;  show tables;</span><br><span class="line">+<span class="literal">---------------</span>+</span><br><span class="line">| Tables_in_db1 |</span><br><span class="line">+<span class="literal">---------------</span>+</span><br><span class="line">| stu           |</span><br><span class="line">| student       |</span><br><span class="line">| student2      |</span><br><span class="line">+<span class="literal">---------------</span>+</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="DML-语句"><a href="#DML-语句" class="headerlink" title="DML 语句"></a>DML 语句</h2><p>DML 语句包括 INSERT，UPDATE，DELETE</p>
<h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">普通的查插入数据</span><br><span class="line">INSERT [<span class="type">LOW_PRIORITY</span> | <span class="type">DELAYED</span> | <span class="type">HIGH_PRIORITY</span>] [<span class="type">IGNORE</span>]</span><br><span class="line">    [<span class="built_in">INT</span><span class="type">O</span>] tbl_name [(<span class="type">col_name</span>,<span class="type">...</span>)]</span><br><span class="line">    &#123;VALUES | VALUE&#125; (&#123;expr | DEFAULT&#125;,...),(...),...</span><br><span class="line">    [ <span class="type">ON</span> <span class="type">DUPLICATE</span> <span class="type">KEY</span> <span class="type">UPDATE</span></span><br><span class="line">      <span class="type">col_name</span>=<span class="type">expr</span></span><br><span class="line">        [, <span class="type">col_name</span>=<span class="type">expr</span>] <span class="type">...</span> ]</span><br><span class="line"></span><br><span class="line">INSERT 可以一次往表中插入一条或多条记录</span><br><span class="line">INSERT tbl_name <span class="function">[(<span class="type">col1</span>,<span class="type">...</span>)] <span class="title">VALUES</span></span> (val1,...), (val21,...)</span><br><span class="line"></span><br><span class="line">根据条件插入数据</span><br><span class="line">如果记录不存在就新增，如果存在就更新</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">插入一条数据, 只给出部份字段值，因为有些字段有默认值，没有默认值的直接用NULL替代</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; insert stu (name,age,is_del) values(<span class="string">&#x27;xiaohong&#x27;</span>,<span class="number">18</span>,false);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">select</span> * from stu;</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">--------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| id | name     | mobile | age  | is_del |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">--------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| <span class="number">10</span> | xiaoming | NULL   |   <span class="number">20</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">11</span> | xiaohong | NULL   |   <span class="number">18</span> |      <span class="number">0</span> |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">--------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line"><span class="number">2</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">不指定字段的话，那么就需要按照顺序为每个字段赋予数据值</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; INSERT INTO stu VALUES(<span class="number">12</span>,<span class="string">&#x27;xiaoli&#x27;</span>,<span class="number">13912345678</span>,<span class="number">19</span>,false);</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">select</span> * from stu;</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| id | name     | mobile      | age  | is_del |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| <span class="number">10</span> | xiaoming | NULL        |   <span class="number">20</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">11</span> | xiaohong | NULL        |   <span class="number">18</span> |      <span class="number">0</span> |</span><br><span class="line">| <span class="number">12</span> | xiaoli   | <span class="number">13912345678</span> |   <span class="number">19</span> |      <span class="number">0</span> |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"></span><br><span class="line">一次插入多条，字段给定后，多来几个value组合即可，彼此用逗号隔开</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt;  INSERT INTO stu (name,age)VALUES(<span class="string">&#x27;test1&#x27;</span>,<span class="number">20</span>),(<span class="string">&#x27;test2&#x27;</span>,<span class="number">21</span>),(<span class="string">&#x27;test3&#x27;</span>,<span class="number">22</span>);</span><br><span class="line">Query OK, <span class="number">3</span> rows affected (<span class="number">0.001</span> sec)</span><br><span class="line">Records: <span class="number">3</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">select</span> * from stu;</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| id | name     | mobile      | age  | is_del |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| <span class="number">10</span> | xiaoming | NULL        |   <span class="number">20</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">11</span> | xiaohong | NULL        |   <span class="number">18</span> |      <span class="number">0</span> |</span><br><span class="line">| <span class="number">12</span> | xiaoli   | <span class="number">13912345678</span> |   <span class="number">19</span> |      <span class="number">0</span> |</span><br><span class="line">| <span class="number">13</span> | test1    | NULL        |   <span class="number">20</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">14</span> | test2    | NULL        |   <span class="number">21</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">15</span> | test3    | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line"><span class="number">6</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="基于select方式插入数据"><a href="#基于select方式插入数据" class="headerlink" title="基于select方式插入数据"></a>基于select方式插入数据</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">INSERT [<span class="type">LOW_PRIORITY</span> | <span class="type">HIGH_PRIORITY</span>] [<span class="type">IGNORE</span>]</span><br><span class="line">    [<span class="built_in">INT</span><span class="type">O</span>] tbl_name [(<span class="type">col_name</span>,<span class="type">...</span>)]</span><br><span class="line">    <span class="built_in">SELECT</span> ... <span class="comment"># 基于select筛选出来的结果作为信息，数据进入插入</span></span><br><span class="line">    [ <span class="type">ON</span> <span class="type">DUPLICATE</span> <span class="type">KEY</span> <span class="type">UPDATE</span></span><br><span class="line">      <span class="type">col_name</span>=<span class="type">expr</span></span><br><span class="line">        [, <span class="type">col_name</span>=<span class="type">expr</span>] <span class="type">...</span> ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">基于id=<span class="number">11</span>的数据，然后根据字段的方式，插入到数据表里面</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; insert into stu (name,age) <span class="built_in">select</span> name,age from stu <span class="built_in">where</span> id=<span class="number">11</span>;</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.001</span> sec)</span><br><span class="line">Records: <span class="number">1</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">SELECT</span> * FROM stu;</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| id | name     | mobile      | age  | is_del |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| <span class="number">10</span> | xiaoming | NULL        |   <span class="number">20</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">11</span> | xiaohong | NULL        |   <span class="number">18</span> |      <span class="number">0</span> |</span><br><span class="line">| <span class="number">12</span> | zhangsan | <span class="number">13912345678</span> |   <span class="number">19</span> |      <span class="number">0</span> |</span><br><span class="line">| <span class="number">13</span> | test1    | NULL        |   <span class="number">20</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">14</span> | test2    | NULL        |   <span class="number">21</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">15</span> | test3    | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">16</span> | xiaohong | NULL        |   <span class="number">18</span> |      <span class="number">1</span> |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line"><span class="number">7</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="对于NUll的空值条件判断，要使用-IS-NULL，否则会导致失败"><a href="#对于NUll的空值条件判断，要使用-IS-NULL，否则会导致失败" class="headerlink" title="对于NUll的空值条件判断，要使用 IS NULL，否则会导致失败"></a>对于NUll的空值条件判断，要使用 IS NULL，否则会导致失败</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [<span class="type">db1</span>]&gt; update stu <span class="built_in">set</span> age=<span class="number">35</span> <span class="built_in">where</span> mobile=NULL;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.000</span> sec)</span><br><span class="line">Rows matched: <span class="number">0</span>  Changed: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; update stu <span class="built_in">set</span> age=<span class="number">35</span> <span class="built_in">where</span> mobile IS NULL;</span><br><span class="line">Query OK, <span class="number">7</span> rows affected (<span class="number">0.001</span> sec)</span><br><span class="line">Rows matched: <span class="number">7</span>  Changed: <span class="number">7</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">SELECT</span> * FROM stu;</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| id | name     | mobile      | age  | is_del |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| <span class="number">10</span> | xiaoming | NULL        |   <span class="number">35</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">11</span> | xiaohong | NULL        |   <span class="number">35</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">12</span> | zhangsan | <span class="number">13912345678</span> |   <span class="number">30</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">13</span> | test1    | NULL        |   <span class="number">35</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">14</span> | test2    | NULL        |   <span class="number">35</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">15</span> | test3    | NULL        |   <span class="number">35</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">16</span> | xiaohong | NULL        |   <span class="number">35</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">17</span> | xiaohong | NULL        |   <span class="number">35</span> |      <span class="number">0</span> |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line"><span class="number">8</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br></pre></td></tr></table></figure>

<h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">删除表中的数据，不会缩减数据文件大小。在生产环境中，一般是逻辑删除，是指用一个字段标识该条记录己经删除了，在业务中不可用，而不是真的删除。</span><br><span class="line">DELETE [<span class="type">LOW_PRIORITY</span>] [<span class="type">QUICK</span>] [<span class="type">IGNORE</span>] FROM tbl_name</span><br><span class="line">   [<span class="type">WHERE</span> <span class="type">where_condition</span>]</span><br><span class="line">   [<span class="type">ORDER</span> <span class="type">BY</span> <span class="type">...</span>]</span><br><span class="line">   [<span class="type">LIMIT</span> <span class="type">row_count</span>]</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [<span class="type">db1</span>]&gt; delete from stu <span class="built_in">where</span> id=<span class="number">10</span>;</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">SELECT</span> * FROM stu;</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| id | name     | mobile      | age  | is_del |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| <span class="number">11</span> | xiaohong | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">12</span> | zhangsan | <span class="number">13912345678</span> |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">13</span> | test1    | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">14</span> | test2    | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">15</span> | test3    | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">16</span> | xiaohong | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">17</span> | xiaohong | NULL        |   <span class="number">22</span> |      <span class="number">0</span> |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line"><span class="number">7</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; delete from stu <span class="built_in">where</span> ( mobile IS NULL and id=<span class="number">14</span> );</span><br><span class="line">Query OK, <span class="number">1</span> row affected (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">SELECT</span> * FROM stu;</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| id | name     | mobile      | age  | is_del |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line">| <span class="number">11</span> | xiaohong | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">12</span> | zhangsan | <span class="number">13912345678</span> |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">13</span> | test1    | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">15</span> | test3    | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">16</span> | xiaohong | NULL        |   <span class="number">22</span> |      <span class="number">1</span> |</span><br><span class="line">| <span class="number">17</span> | xiaohong | NULL        |   <span class="number">22</span> |      <span class="number">0</span> |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">----------</span>+<span class="literal">-------------</span>+<span class="literal">------</span>+<span class="literal">--------</span>+</span><br><span class="line"><span class="number">6</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在直实生产环境中，一般不会对数据做物理删除，而是用字段来标记为逻辑删除，将对应字段值设为某个特定项，认为是己删除</p>
<h3 id="清空表数据"><a href="#清空表数据" class="headerlink" title="清空表数据"></a>清空表数据</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TRUNCATE TABLE tbl_name; <span class="comment">#DDL语句，不支持事务，效率更高</span></span><br><span class="line">DELETE FROM tbl_name; <span class="comment">#DML语句</span></span><br><span class="line">TRUNCATE 清理表数据</span><br><span class="line">ariaDB [<span class="type">db1</span>]&gt; TRUNCATE TABLE  stu;</span><br><span class="line">Query OK, <span class="number">0</span> rows affected (<span class="number">0.011</span> sec)</span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">SELECT</span> * FROM stu;</span><br><span class="line">Empty <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br></pre></td></tr></table></figure>

<h2 id="DQL语句"><a href="#DQL语句" class="headerlink" title="DQL语句"></a>DQL语句</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">SELECT</span></span><br><span class="line">   [<span class="type">ALL</span> | <span class="type">DISTINCT</span> | <span class="type">DISTINCTROW</span> ]</span><br><span class="line">     [<span class="type">HIGH_PRIORITY</span>]</span><br><span class="line">     [<span class="type">STRAIGHT_JOIN</span>]</span><br><span class="line">     [<span class="type">SQL_SMALL_RESULT</span>] [<span class="type">SQL_BIG_RESULT</span>] [<span class="type">SQL_BUFFER_RESULT</span>]</span><br><span class="line">     [<span class="type">SQL_CACHE</span> | <span class="type">SQL_NO_CACHE</span>] [<span class="type">SQL_CALC_FOUND_ROWS</span>]</span><br><span class="line">   select_expr [, <span class="type">select_expr</span> <span class="type">...</span>]</span><br><span class="line">   [<span class="type">FROM</span> <span class="type">table_references</span></span><br><span class="line">   [<span class="type">WHERE</span> <span class="type">where_condition</span>]</span><br><span class="line">   [<span class="type">GROUP</span> <span class="type">BY</span> &#123;<span class="type">col_name</span> | <span class="type">expr</span> | <span class="type">position</span>&#125;</span><br><span class="line">     [<span class="type">ASC</span> | <span class="type">DESC</span>], <span class="type">...</span> [<span class="type">WITH</span> <span class="type">ROLLUP</span>]]</span><br><span class="line">   [<span class="type">HAVING</span> <span class="type">where_condition</span>]</span><br><span class="line">   [<span class="type">ORDER</span> <span class="type">BY</span> &#123;<span class="type">col_name</span> | <span class="type">expr</span> | <span class="type">position</span>&#125;</span><br><span class="line">     [<span class="type">ASC</span> | <span class="type">DESC</span>], <span class="type">...</span>]</span><br><span class="line">   [<span class="type">LIMIT</span> &#123;[<span class="type">offset</span>,] <span class="type">row_count</span> | <span class="type">row_count</span> <span class="type">OFFSET</span> <span class="type">offset</span>&#125;]</span><br><span class="line">   [<span class="type">PROCEDURE</span> <span class="type">procedure_name</span>(<span class="type">argument_list</span>)]</span><br><span class="line">   [<span class="built_in">INT</span><span class="type">O</span> <span class="type">OUTFILE</span> <span class="string">&#x27;file_name&#x27;</span></span><br><span class="line">       [<span class="built_in">CHAR</span><span class="type">ACTER</span> <span class="type">SET</span> <span class="built_in">char</span><span class="type">set_name</span>]</span><br><span class="line">       <span class="type">export_options</span></span><br><span class="line">     | <span class="built_in">INT</span><span class="type">O</span> <span class="type">DUMPFILE</span> <span class="string">&#x27;file_name&#x27;</span></span><br><span class="line">     | <span class="built_in">INT</span><span class="type">O</span> <span class="type">var_name</span> [, <span class="type">var_name</span>]]</span><br><span class="line">   [<span class="type">FOR</span> <span class="type">UPDATE</span> | <span class="type">LOCK</span> <span class="type">IN</span> <span class="type">SHARE</span> <span class="type">MODE</span>]]</span><br><span class="line"></span><br><span class="line">说明</span><br><span class="line">字段显示可以使用别名：col1 AS alias1, col2 AS alias2，......</span><br><span class="line"><span class="built_in">WHERE</span>子句：指明过滤条件以实现<span class="string">&quot;选择&quot;</span>的功能</span><br><span class="line">    过滤条件：布尔型表达式</span><br><span class="line">    算术操作符：+，-，*，/， %</span><br><span class="line">    比较操作符：=，&lt;=&gt;（相等或都为空）,&lt;&gt;，!=(非标准SQL)，&gt;，&gt;=，&lt;，&lt;=</span><br><span class="line">    逻辑操作符：NOT，AND，OR，XOR</span><br><span class="line"></span><br><span class="line">范例查询：BETWEEN min_num AND max_num</span><br><span class="line">不连续的查询：<span class="keyword">IN</span> (element1，element2，...)  </span><br><span class="line">空查询：IS NULL,，IS NOT NULL</span><br><span class="line"></span><br><span class="line">DISTINCT 去除重复行，范例：<span class="built_in">SELECT</span> DISTINCT gender FROM students;</span><br><span class="line"></span><br><span class="line">模糊查询：LIKE 使用 % 表示任意长度的任意字符 _ 表示任意单个字符</span><br><span class="line">RLIKE：正则表达式，索引失效，不建议使用</span><br><span class="line">REGEXP：匹配字符串可用正则表达式书写模式，同上</span><br><span class="line"></span><br><span class="line"><span class="built_in">GROUP</span> BY：根据指定的条件把查询结果进行<span class="string">&quot;分组&quot;</span>以用于做<span class="string">&quot;聚合&quot;</span>运算</span><br><span class="line">常见聚合函数： count()，sum()，max()，min()，avg()，注意：聚合函数不对null统计</span><br><span class="line">HAVING：对分组聚合运算后的结果指定过滤条件</span><br><span class="line">一旦分组 <span class="built_in">group</span> by，<span class="built_in">select</span>语句后只跟分组的字段，聚合函数</span><br><span class="line"></span><br><span class="line">ORDER BY：根据指定的字段对查询结果进行排序</span><br><span class="line">升序：ASC</span><br><span class="line">降序：DESC</span><br><span class="line"></span><br><span class="line">LIMIT [[<span class="type">offset</span>,]<span class="type">row_count</span>]：对查询的结果进行输出行数数量限制，跳过 offset，显示row_count 行，offset 默为值为 <span class="number">0</span>。</span><br><span class="line"></span><br><span class="line"><span class="keyword">FOR</span> UPDATE：写锁，独占或排它锁，只有一个读和写操作</span><br><span class="line">LOCK <span class="keyword">IN</span> SHARE MODE：读锁，共享锁，同时多个读操作</span><br></pre></td></tr></table></figure>

<h3 id="DQL-语句进阶"><a href="#DQL-语句进阶" class="headerlink" title="DQL 语句进阶"></a><strong>DQL</strong> <strong>语句进阶</strong></h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">**多表查询语句类型**</span><br><span class="line"></span><br><span class="line">| 查询分类     | 说明                                                         |</span><br><span class="line">| <span class="literal">------------</span> | <span class="literal">------------------------------------------------------------</span> |</span><br><span class="line">| 子查询       | 在SQL语句中嵌套着查询语句，性能较差，基于某语句的查询结果再次进行的查询 |</span><br><span class="line">| 联合查询     | UNION                                                        |</span><br><span class="line">| 交叉连接     | 笛卡尔积 CROSS JOIN                                          |</span><br><span class="line">| 等值内连接   | 让表之间的字段以<span class="string">&quot;等值&quot;</span>建立连接关系                           |</span><br><span class="line">| 不等值内连接 | 让表之间的字段以<span class="string">&quot;不等值&quot;</span>建立连接关系                         |</span><br><span class="line">| 自然连接     | 去掉重复列的等值连接                                         |</span><br><span class="line">| 左外连接     | LEFT JOIN                                                    |</span><br><span class="line">| 右外连接     | RIGHT JOIN                                                   |</span><br><span class="line">| 完全外连接   | tb1 FULL OUTER JOIN tb2 ON tb1.col=tb2.col，MySQL 不支持此写法 |</span><br><span class="line">| 自连接       | 本表和本表进行连接查询                                       |</span><br><span class="line"></span><br><span class="line"><span class="comment">#### 子查询</span></span><br><span class="line"></span><br><span class="line">```powershell</span><br><span class="line">子查询 subquery</span><br><span class="line">即 SQL 语句调用另一个 <span class="built_in">SELECT</span> 子句，可以是对同一张表，也可以是对不同表</span><br><span class="line"></span><br><span class="line">子查询主要有四种用法</span><br><span class="line"><span class="number">1</span> 用于比较表达式中的子查询；子查询仅能返回单个值</span><br><span class="line"><span class="number">2</span> 用于<span class="keyword">IN</span>中的子查询：子查询应该单独查询并返回一个或多个值重新构成列表</span><br><span class="line"><span class="number">3</span> 用于 EXISTS 和 Not EXISTS</span><br><span class="line"><span class="number">4</span> 用于FROM子句中的子查询</span><br></pre></td></tr></table></figure>

<h4 id="存在与否子查询"><a href="#存在与否子查询" class="headerlink" title="存在与否子查询"></a><strong>存在与否子查询</strong></h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">用于 EXISTS 和 Not EXISTS</span><br><span class="line">  EXISTS(包括 NOT EXISTS )子句的返回值是一个BOOL值。</span><br><span class="line">    EXISTS 内部有一个子查询语句(<span class="built_in">SELECT</span>... FROM...)， 将其称为EXIST的内查询语句。</span><br><span class="line">   其内查询语句返回一个结果集。</span><br><span class="line">   </span><br><span class="line">    EXISTS 子句根据其内查询语句的结果集空或者非空，返回一个布尔值。</span><br><span class="line">   将外查询表的每一行，代入内查询作为检验，如果内查询返回的结果为非空值，则EXISTS子句返回TRUE，</span><br><span class="line">   外查询的这一行数据便可作为外查询的结果行返回，否则不能作为结果。 </span><br><span class="line"></span><br><span class="line">EXISTS (或 NOT EXISTS) 用在 <span class="built_in">where</span>之后，且后面紧跟子查询语句（带括号）</span><br><span class="line"> EXISTS (或 NOT EXISTS) 只关心子查询有没有结果,并不关心子查询的结果具体是什么</span><br><span class="line"> 下面语句把stu的记录逐条代入到Exists后面的子查询中，如果子查询结果集不为空，即说明存在，那</span><br><span class="line">么这条stu的记录出现在最终结果集，否则被排除</span><br></pre></td></tr></table></figure>

<h4 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SQL中的联合连接（或称联合、UNION）主要用于合并两个或多个<span class="built_in">SELECT</span>语句的结果集，并返回合并后的结果。这些<span class="built_in">SELECT</span>语句必须拥有相同数量的列，且对应列的数据类型也需要兼容。</span><br><span class="line">  联合连接有两种主要形式：UNION和UNION ALL。</span><br></pre></td></tr></table></figure>

<h4 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a><strong>交叉连接</strong></h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SQL的交叉连接（CROSS JOIN）是一种特殊的连接操作，它返回两个或多个表中所有可能的行组合。</span><br><span class="line">交叉连接简单地将两个表的所有记录相互匹配，生成的结果集是两个表的笛卡尔积。即，如果表A有M行，表B有N行，那么交叉连接的结果集将包含M*N行。</span><br></pre></td></tr></table></figure>

<h4 id="内链接"><a href="#内链接" class="headerlink" title="内链接"></a>内链接</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> SQL中的内连接（INNER JOIN）是一种基本的连接操作，用于从两个或多个表中返回满足连接条件的记录。内连接只返回那些在连接条件中有匹配值的记录。如果某个记录在连接的一个表中存在，但在另一个表中没有匹配的连接值，则该记录不会出现在结果集中。</span><br><span class="line"> 基本语法</span><br><span class="line"><span class="built_in">SELECT</span> 列名<span class="number">1</span>, 列名<span class="number">2</span>, ... <span class="comment"># 指定要从连接的结果集中选择的列</span></span><br><span class="line">FROM 表<span class="number">1</span>  <span class="comment"># 指定连接操作中的第一个表。</span></span><br><span class="line">INNER JOIN 表<span class="number">2</span>  <span class="comment"># 指定要与第一个表进行内连接的第二个表。</span></span><br><span class="line">ON 表<span class="number">1</span>.列名 = 表<span class="number">2</span>.列名;   <span class="comment"># 定义连接条件。两个表中哪些列的值应该相等，然后记录匹配在一起。</span></span><br><span class="line">内连接也可以使用其他SQL关键字或子句进行扩展，比如<span class="built_in">WHERE</span>、ORDER BY、<span class="built_in">GROUP</span> BY等，以满足更复杂的查询需求。</span><br></pre></td></tr></table></figure>

<h4 id="自然链接"><a href="#自然链接" class="headerlink" title="自然链接"></a>自然链接</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> SQL自然连接（NATURAL JOIN）是一种特殊的内连接，用于在两个或多个表之间基于相同列名进行匹配，并将匹配到的记录组合在一起，同时消除重复的列。</span><br><span class="line">- 当源表和目标表共享相同名称的列时，就可以在它们之间执行自然连接，而无需指定连接列。</span><br><span class="line">- 在使用纯自然连接时，如没有相同的列时，会产生交叉连接（笛卡尔乘积）。</span><br><span class="line">语法格式：<span class="built_in">SELECT</span> * FROM A NATURAL JOIN B;</span><br></pre></td></tr></table></figure>

<h4 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL中的外连接（Outer Join）是一种数据库查询操作，用于联结两个或多个表，并返回满足指定条件的记录，同时包括那些在联结条件中不匹配的记录。</span><br></pre></td></tr></table></figure>

<h4 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">  自连接（Self Join）是SQL中的一种连接操作，它允许一个表与其自身进行连接。这种操作在处理需要比较表中记录之间关系的场景时非常有用。通过自连接，你可以将表看作两个不同的表，并基于它们之间的某些匹配条件来组合数据。</span><br><span class="line">  </span><br><span class="line">自连接的基本语法类似于其他类型的连接，但关键在于给同一个表指定两个不同的别名。</span><br><span class="line"><span class="built_in">SELECT</span> a.*, b.*</span><br><span class="line">FROM table_name a</span><br><span class="line">JOIN table_name b</span><br><span class="line">ON a.common_column = b.common_column; <span class="comment"># common_column 是用于连接两个实例的表的匹配条件。</span></span><br><span class="line"></span><br><span class="line">自连接的作用</span><br><span class="line">查找表中具有特定关系的记录：</span><br><span class="line"> 例如，有一个员工表 employees，其中包含员工ID和经理ID（manager_id），你可以使用自连接来查找每个员工的经理信息。</span><br><span class="line">查找表中的层级关系：</span><br><span class="line"> 例如，一个组织结构表 org_structure，其中每个节点都有一个父节点，你可以使用自连接来查找某个节点的所有上级节点。</span><br><span class="line">查找表中的重复记录：</span><br><span class="line"> 例如，有一个客户表 customers，你想找到所有具有相同电子邮件地址的客户，你可以使用自连接来比较表中的记录。</span><br><span class="line"> </span><br><span class="line">性能：自连接可能会产生大量的中间结果集，因此在大数据集上使用时需要特别注意性能。</span><br><span class="line">别名：务必为同一个表的不同实例使用不同的别名，否则会导致SQL语法错误。</span><br><span class="line">条件：确保连接条件正确，以避免返回不相关的结果。</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">select</span> * from students;<span class="built_in">select</span> * from subjects;<span class="built_in">select</span> * from scores;</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">-----------</span>+</span><br><span class="line">| id | name      |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">-----------</span>+</span><br><span class="line">|  <span class="number">1</span> | zhang san |</span><br><span class="line">|  <span class="number">2</span> | li <span class="built_in">si</span>     |</span><br><span class="line">|  <span class="number">3</span> | wang wu   |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">-----------</span>+</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"></span><br><span class="line">+<span class="literal">----</span>+<span class="literal">--------</span>+</span><br><span class="line">| id | name   |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">--------</span>+</span><br><span class="line">|  <span class="number">1</span> | linux  |</span><br><span class="line">|  <span class="number">2</span> | golang |</span><br><span class="line">|  <span class="number">3</span> | python |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">--------</span>+</span><br><span class="line"><span class="number">3</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"></span><br><span class="line">+<span class="literal">------------</span>+<span class="literal">------------</span>+<span class="literal">-------</span>+</span><br><span class="line">| student_id | subject_id | score |</span><br><span class="line">+<span class="literal">------------</span>+<span class="literal">------------</span>+<span class="literal">-------</span>+</span><br><span class="line">|          <span class="number">1</span> |          <span class="number">1</span> |    <span class="number">60</span> |</span><br><span class="line">|          <span class="number">1</span> |          <span class="number">2</span> |    <span class="number">70</span> |</span><br><span class="line">|          <span class="number">1</span> |          <span class="number">3</span> |    <span class="number">80</span> |</span><br><span class="line">|          <span class="number">2</span> |          <span class="number">1</span> |    <span class="number">70</span> |</span><br><span class="line">|          <span class="number">2</span> |          <span class="number">2</span> |    <span class="number">75</span> |</span><br><span class="line">|          <span class="number">2</span> |          <span class="number">3</span> |    <span class="number">65</span> |</span><br><span class="line">|          <span class="number">3</span> |          <span class="number">1</span> |    <span class="number">90</span> |</span><br><span class="line">|          <span class="number">3</span> |          <span class="number">2</span> |    <span class="number">85</span> |</span><br><span class="line">|          <span class="number">3</span> |          <span class="number">3</span> |    <span class="number">65</span> |</span><br><span class="line">+<span class="literal">------------</span>+<span class="literal">------------</span>+<span class="literal">-------</span>+</span><br><span class="line"><span class="number">9</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.000</span> sec)</span><br><span class="line"></span><br><span class="line">MariaDB [<span class="type">db1</span>]&gt; <span class="built_in">select</span> students.id, students.name,subjects.name as subject_name,score from students left join scores on students.id=scores.student_id left join subjects on subjects.id=scores.subject_id;</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">-----------</span>+<span class="literal">--------------</span>+<span class="literal">-------</span>+</span><br><span class="line">| id | name      | subject_name | score |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">-----------</span>+<span class="literal">--------------</span>+<span class="literal">-------</span>+</span><br><span class="line">|  <span class="number">1</span> | zhang san | linux        |    <span class="number">60</span> |</span><br><span class="line">|  <span class="number">1</span> | zhang san | golang       |    <span class="number">70</span> |</span><br><span class="line">|  <span class="number">1</span> | zhang san | python       |    <span class="number">80</span> |</span><br><span class="line">|  <span class="number">2</span> | li <span class="built_in">si</span>     | linux        |    <span class="number">70</span> |</span><br><span class="line">|  <span class="number">2</span> | li <span class="built_in">si</span>     | golang       |    <span class="number">75</span> |</span><br><span class="line">|  <span class="number">2</span> | li <span class="built_in">si</span>     | python       |    <span class="number">65</span> |</span><br><span class="line">|  <span class="number">3</span> | wang wu   | linux        |    <span class="number">90</span> |</span><br><span class="line">|  <span class="number">3</span> | wang wu   | golang       |    <span class="number">85</span> |</span><br><span class="line">|  <span class="number">3</span> | wang wu   | python       |    <span class="number">65</span> |</span><br><span class="line">+<span class="literal">----</span>+<span class="literal">-----------</span>+<span class="literal">--------------</span>+<span class="literal">-------</span>+</span><br><span class="line"><span class="number">9</span> rows <span class="keyword">in</span> <span class="built_in">set</span> (<span class="number">0.001</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SQL 注入是指应用程序对用户输入的数据没有严格校验，没有做合法性判断或者过滤不严格，让攻击者可以通过传参的形式构建特殊的SQL语句并执行，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息，并非法获取系统权限。</span><br></pre></td></tr></table></figure>

<p><strong>SELECT</strong> <strong>语句处理的顺序</strong></p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查询执行路径中的组件：查询缓存、解析器、预处理器、优化器、查询执行引擎、存储引擎</span><br><span class="line"></span><br><span class="line"><span class="built_in">SELECT</span>语句的执行流程：</span><br><span class="line">FROM Clause <span class="literal">--</span>&gt; <span class="built_in">WHERE</span> Clause <span class="literal">--</span>&gt; <span class="built_in">GROUP</span> BY <span class="literal">--</span>&gt; HAVING Clause <span class="literal">--</span>&gt;<span class="built_in">SELECT</span> <span class="literal">--</span>&gt; ORDER BY <span class="literal">--</span>&gt; LIMIT</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">flowchart TB</span><br><span class="line">    A((SQL 解析)) --&gt; B(FROM: 笛卡尔积)</span><br><span class="line">    B --&gt; C(JOIN: 不符合 ON 也添加)</span><br><span class="line">    C --&gt; D(ON: 主表保留)</span><br><span class="line">    D --&gt; E(WHERE: 非聚合, 非 SELECT 别名)</span><br><span class="line">    E --&gt; F(GROUP BY: 改变对表引用)</span><br><span class="line">    F --&gt; G(HAVING: 只作用分组后)</span><br><span class="line">    G --&gt; H(SELECT: DISTINCT)</span><br><span class="line">    H --&gt; I(ORDER BY: 可使用 SELECT 别名)</span><br><span class="line">    I --&gt; J(LIMIT: rows, offset)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="SQL高阶语法"><a href="#SQL高阶语法" class="headerlink" title="SQL高阶语法"></a>SQL高阶语法</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">视图：虚拟表，保存有实表的查询结果，相当于别名。</span><br><span class="line">  利用视图，可以隐藏表真实结构，在程序中利用视图进行查询，可以避免表结构的变化，而修改程序，降低程序和数据库之间的耦合度。</span><br><span class="line">  视图中的数据，实际上是存在于相对应的表中，视图本身没有数据，因此，修改视图中的数据，本质上是修改了表中的数据。</span><br><span class="line">  视图是一种虚拟表，它基于SQL查询的结果集。</span><br><span class="line">  </span><br><span class="line">创建视图</span><br><span class="line">CREATE</span><br><span class="line">    [<span class="type">OR</span> <span class="type">REPLACE</span>]</span><br><span class="line">    [<span class="type">ALGORITHM</span> = &#123;<span class="type">UNDEFINED</span> | <span class="type">MERGE</span> | <span class="type">TEMPTABLE</span>&#125;]</span><br><span class="line">    [<span class="type">DEFINER</span> = &#123; <span class="type">user</span> | <span class="type">CURRENT_USER</span> &#125;]</span><br><span class="line">    [<span class="type">SQL</span> <span class="type">SECURITY</span> &#123; <span class="type">DEFINER</span> | <span class="type">INVOKER</span> &#125;]</span><br><span class="line">    VIEW view_name [(<span class="type">column_list</span>)]</span><br><span class="line">    AS select_statement</span><br><span class="line">    [<span class="type">WITH</span> [<span class="type">CASCADED</span> | <span class="type">LOCAL</span>] <span class="type">CHECK</span> <span class="type">OPTION</span>]  </span><br><span class="line"></span><br><span class="line">查看视图</span><br><span class="line">SHOW CREATE VIEW view_name <span class="comment">#只能看视图定义</span></span><br><span class="line">SHOW CREATE TABLE view_name <span class="comment"># 可以查看表和视图</span></span><br><span class="line"></span><br><span class="line">删除视图</span><br><span class="line">DROP VIEW [<span class="type">IF</span> <span class="type">EXISTS</span>]</span><br><span class="line">    view_name [, <span class="type">view_name</span>] ...</span><br><span class="line">    [<span class="type">RESTRICT</span> | <span class="type">CASCADE</span>]</span><br></pre></td></tr></table></figure>

<h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">MySQL 中的变量分为系统内置变量和用户自定义变量</span><br><span class="line">系统变量：MySQL数据库中内置的变量，可用 <span class="selector-tag">@</span>@var_name 引用。</span><br><span class="line"></span><br><span class="line">用户自定义变量分为以下两种：</span><br><span class="line">普通变量：在当前会话中有效，可用 @var_name 引用</span><br><span class="line">局部变量：在函数或存储过程内才有效，需要用 DECLARE 声明，之后直接用 var_name 引用</span><br><span class="line"></span><br><span class="line">自定义函数中定义局部变量语法</span><br><span class="line">局部变量的作用范围是在 BEGIN...END 程序中，而且定义局部变量语句必须在 BEGIN...END 的第一行定义。</span><br><span class="line">DECLARE 变量<span class="number">1</span>[,变量<span class="number">2</span>,<span class="type">...</span> ]变量类型 [<span class="type">DEFAULT</span> 默认值]</span><br><span class="line"></span><br><span class="line">为变量赋值</span><br><span class="line"><span class="built_in">SET</span> parameter_name = value[,<span class="type">parameter_name</span> = <span class="type">value...</span>]</span><br><span class="line"><span class="built_in">SELECT</span> INTO parameter_name</span><br></pre></td></tr></table></figure>

<h2 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MySQL的存储过程是一组为了完成特定功能的SQL语句集，它存储在数据库中，可以被用户调用。</span><br><span class="line">MySQL中的存储过程指的是存储在数据库中的SQL语句集合。当创建好存储过程后，在运行时提供所需参数，存储过程就可以以代码指定的方式使用参数执行并返回值。</span><br><span class="line">  它可以独立执行，存储过程保存在 mysql.proc 表中</span><br></pre></td></tr></table></figure>

<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">封装与复用：</span><br><span class="line"> 存储过程将复杂的SQL逻辑封装在一起，形成一个独立的执行单元。</span><br><span class="line"> 用户可以通过调用存储过程来执行这些逻辑，而无需每次都编写重复的SQL语句。</span><br><span class="line"> 这有助于提高代码的复用性和可维护性。</span><br><span class="line"> </span><br><span class="line">接收参数与返回数据：</span><br><span class="line"> 存储过程可以接受输入参数，并根据这些参数执行相应的逻辑。</span><br><span class="line"> 同时，存储过程也可以返回数据，包括状态码、结果集等。</span><br><span class="line"> </span><br><span class="line">编译与执行效率：</span><br><span class="line"> 存储过程在创建时会被编译成二进制代码，并存储在数据库中。</span><br><span class="line"> 当存储过程被调用时，数据库可以直接执行这些预编译的代码，而无需每次都重新编译SQL语句。</span><br><span class="line"> 这有助于提高数据库的执行效率。</span><br></pre></td></tr></table></figure>

<h4 id="存储过程与自定义函数的区别"><a href="#存储过程与自定义函数的区别" class="headerlink" title="存储过程与自定义函数的区别"></a>存储过程与自定义函数的区别</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 存储过程实现的过程要复杂一些，而函数的针对性较强。</span><br><span class="line">- 存储过程可以有多个返回值，而自定义函数只有一个返回值。</span><br><span class="line">- 存储过程一般可独立执行，而函数往往是作为其他SQL语句的一部分来使用。</span><br><span class="line">- 无参数的存储过程执行过程中可以不加()，函数必须加 ()。</span><br></pre></td></tr></table></figure>

<h4 id="存储过程语法"><a href="#存储过程语法" class="headerlink" title="存储过程语法"></a>存储过程语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">创建存储过程</span><br><span class="line">CREATE PROCEDURE 存储过程名 (参数列表)</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="literal">--</span> SQL语句</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">其中，参数列表可以包含输入参数（<span class="keyword">IN</span>）、输出参数（OUT）或输入输出参数（INOUT）。</span><br><span class="line"></span><br><span class="line">调用存储过程：</span><br><span class="line">CALL 存储过程名(参数值);</span><br><span class="line"></span><br><span class="line">查看存储过程：</span><br><span class="line">查看存储过程列表</span><br><span class="line">SHOW PROCEDURE STATUS</span><br><span class="line">查看存储过程定义</span><br><span class="line">SHOW CREATE PROCEDURE sp_name</span><br><span class="line"></span><br><span class="line">修改存储过程</span><br><span class="line">ALTER语句修改存储过程只能修改存储过程的注释等无关紧要的东西,不能修改存储过程体.</span><br><span class="line">   所以要修改存储过程,方法就是删除重建</span><br><span class="line">   </span><br><span class="line">删除存储过程：</span><br><span class="line">DROP PROCEDURE <span class="keyword">IF</span> EXISTS 存储过程名;</span><br></pre></td></tr></table></figure>

<h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">存储过程中的流程控制，可以使用流程控制来控制语句的执行</span><br><span class="line"></span><br><span class="line">条件控制语句：如<span class="keyword">IF</span>、CASE等，用于根据条件执行不同的SQL语句。</span><br><span class="line">- <span class="keyword">IF</span>：用来进行条件判断。根据是否满足条件，执行不同语句</span><br><span class="line">- CASE：用来进行条件判断，可实现比<span class="keyword">IF</span>语句更复杂的条件判断</span><br><span class="line"></span><br><span class="line">循环控制语句：如<span class="keyword">WHILE</span>、REPEAT、LOOP等，用于重复执行一组SQL语句直到满足特定条件为止。</span><br><span class="line">- LOOP：重复执行特定的语句，实现一个简单的循环</span><br><span class="line">- LEAVE：用于跳出循环控制，相当于SHELL中<span class="keyword">break</span></span><br><span class="line">- ITERATE：跳出本次循环，然后直接进入下一次循环，相当于SHELL中<span class="keyword">continue</span></span><br><span class="line">- REPEAT：有条件控制的循环语句。当满足特定条件时，就会跳出循环语句</span><br><span class="line">- <span class="keyword">WHILE</span>：有条件控制的循环语句</span><br><span class="line"></span><br><span class="line">应用场景</span><br><span class="line">数据转换与迁移：</span><br><span class="line"> 存储过程可以用于数据转换和迁移任务，</span><br><span class="line"> 如将一种数据格式转换为另一种数据格式，或将数据从一个表迁移到另一个表。</span><br><span class="line"> </span><br><span class="line">复杂逻辑处理：</span><br><span class="line"> 存储过程可以封装复杂的SQL逻辑，如多表关联查询、条件判断、循环处理等。</span><br><span class="line"> </span><br><span class="line">报表生成：</span><br><span class="line"> 存储过程可以用于生成报表数据，如根据特定条件查询数据并返回结果集供报表工具使用。</span><br><span class="line"> </span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h4 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">MySQL触发器是一种数据库管理系统（DBMS）中的功能，它允许用户定义在指定表上的某些操作（如INSERT、UPDATE或DELETE）发生之前或之后自动执行的SQL语句或语句集。</span><br><span class="line">触发器是与表事件（例如表的INSERT、UPDATE或DELETE操作）相关联的命名数据库对象。当在指定表上发生特定事件时，触发器会自动激活，并执行相应的SQL语句。</span><br><span class="line"></span><br><span class="line">特点</span><br><span class="line">触发器是数据库层面上的自动化工具，当特定的数据库操作发生时自动执行，无需手动调用。</span><br><span class="line">触发器在事件发生时立即执行，适用于需要实时处理数据变化的场景。</span><br><span class="line">触发器可以帮助维护数据的完整性和一致性，无需依赖应用程序代码来实现这些功能。</span><br><span class="line"></span><br><span class="line">应用场景</span><br><span class="line">触发器在实际开发中有广泛的应用，以下是几个常见的应用场景：</span><br><span class="line">自动化任务：</span><br><span class="line"> 触发器可以自动记录表数据变化的日志、生成统计信息等。例如，在用户表中添加一条记录时，同时在日志表中记录这条记录的信息。</span><br><span class="line"> </span><br><span class="line">数据验证：</span><br><span class="line"> 可以在数据更新时验证数据的完整性和正确性。例如，确保账户余额始终非负。</span><br><span class="line"> </span><br><span class="line">实时同步：</span><br><span class="line"> 保持多个表之间的一致性。例如，当主表的数据发生变化时，相应的变更也会反映到备份表中。</span><br><span class="line"> </span><br><span class="line">复杂业务逻辑：</span><br><span class="line"> 实现比简单约束更复杂的规则。例如，每当有新的员工加入公司时，自动更新部门中的人数。</span><br><span class="line"> </span><br><span class="line">使用语法</span><br><span class="line">创建触发器：使用CREATE TRIGGER语句来创建触发器。</span><br><span class="line">CREATE TRIGGER trigger_name</span><br><span class="line">&#123;BEFORE|AFTER&#125; &#123;INSERT|UPDATE|DELETE&#125;</span><br><span class="line">ON table_name</span><br><span class="line"><span class="keyword">FOR</span> EACH ROW</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="literal">--</span> 触发器逻辑</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line">    trigger_name是触发器的名称；</span><br><span class="line">    BEFORE或AFTER指定触发器是在操作之前还是之后执行；</span><br><span class="line">    INSERT、UPDATE或DELETE指定触发器响应的操作类型；</span><br><span class="line">    table_name是触发器绑定的表；</span><br><span class="line">    <span class="keyword">FOR</span> EACH ROW表示触发器针对表中的每一行进行操作。</span><br><span class="line"></span><br><span class="line">查看触发器：可以使用SHOW TRIGGERS命令来查看系统中存在的所有触发器。</span><br><span class="line">样式<span class="number">1</span>：</span><br><span class="line">SHOW TRIGGERS;</span><br><span class="line">样式<span class="number">2</span>：</span><br><span class="line">USE information_schema;</span><br><span class="line"><span class="built_in">SELECT</span> * FROM triggers <span class="built_in">WHERE</span> trigger_name=<span class="string">&#x27;trigger_name&#x27;</span>;</span><br><span class="line"></span><br><span class="line">删除触发器：如果需要删除某个触发器，可以使用DROP TRIGGER语句。</span><br><span class="line">DROP TRIGGER <span class="keyword">IF</span> EXISTS trigger_name;</span><br></pre></td></tr></table></figure>

<h3 id="事件调度器"><a href="#事件调度器" class="headerlink" title="事件调度器"></a>事件调度器</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">事件调度器是MySQL数据库服务器的一部分，负责事件的调度，不断监视某个事件是否被调用。</span><br><span class="line">可以通过SHOW VARIABLES LIKE <span class="string">&#x27;event_scheduler&#x27;</span>或<span class="built_in">SELECT</span> <span class="selector-tag">@</span>@event_scheduler命令查看事件调度器的状态。</span><br><span class="line"></span><br><span class="line">通过命令开启：</span><br><span class="line"> 使用<span class="built_in">SET</span> GLOBAL event_scheduler = ON命令可以开启事件调度器。</span><br><span class="line">通过命令关闭：</span><br><span class="line"> 使用<span class="built_in">SET</span> GLOBAL event_scheduler = OFF命令可以关闭事件调度器。</span><br><span class="line">通过配置文件开启：</span><br><span class="line"> 在MySQL配置文件中找到[<span class="type">mysqld</span>]选项，然后添加event_scheduler = ON代码并保存，之后重启MySQL服务即可生效。</span><br><span class="line"> </span><br><span class="line">注意事项：</span><br><span class="line"> 通过<span class="built_in">SET</span> GLOBAL命令开启或关闭事件后，MySQL重启服务后事件又会回到原来的状态（默认为OFF）。如果想要始终开启或关闭事件，需要修改MySQL配置文件。</span><br></pre></td></tr></table></figure>

<h2 id="事件管理"><a href="#事件管理" class="headerlink" title="事件管理"></a>事件管理</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">创建事件</span><br><span class="line">create event 语句创建一个事件。每个事件由两个主要部分组成，</span><br><span class="line"> 第一部分是事件调度（event schedule），表示事件何时启动以及按什么频率启动，</span><br><span class="line"> 第二部分是事件动作（event action ），这是事件启动时执行的代码，事件的动作包含一条SQL语句，</span><br><span class="line"> 它可能是一个简单地insert 或者 update语句，</span><br><span class="line"> 也可以是一个存储过程或者 benin...end 语句块，</span><br><span class="line"> 这两种情况允许我们执行多条SQL。</span><br></pre></td></tr></table></figure>

<h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">创建用户;CREATE USER</span><br><span class="line">格式</span><br><span class="line"> CREATE USER <span class="string">&#x27;USERNAME&#x27;</span><span class="string">@&#x27;HOST&#x27; [IDENTIFIED BY &#x27;password&#x27;]；</span></span><br><span class="line"><span class="string">范例</span></span><br><span class="line"><span class="string">    create user test@&#x27;10.0.0.0/255.255.255.0&#x27; identified by &#x27;123456&#x27;;</span></span><br><span class="line"><span class="string">    create user test2@&#x27;10.0.0.%&#x27; identified by &#x27;123456&#x27;; </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">重命名用户：RENAME USER</span></span><br><span class="line"><span class="string">格式</span></span><br><span class="line"><span class="string"> RENAME USER &#x27;USERNAME&#x27;@&#x27;HOST&#x27; TO &#x27;USERNAME&#x27;@&#x27;HOST&#x27;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">删除用户：DROP USER</span></span><br><span class="line"><span class="string">格式</span></span><br><span class="line"><span class="string"> DROP USER &#x27;USERNAME&#x27;@&#x27;HOST&#x27;</span></span><br><span class="line"><span class="string">范例，删除默认的空用户</span></span><br><span class="line"><span class="string"> DROP USER &#x27;&#x27;@&#x27;localhost&#x27;;</span></span><br></pre></td></tr></table></figure>

<h3 id="密码信息"><a href="#密码信息" class="headerlink" title="密码信息"></a>密码信息</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MySQL8.<span class="number">0</span>中的密码是放在 mysql.user 表中 authentication_string 字段中，但MariaDB中还保留了Password字段</span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">John Doe</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://lx1me.github.io/2025/06/05/MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://lx1me.github.io/2025/06/05/MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93/')">Hexo</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://lx1me.github.io/2025/06/05/MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Hexo&amp;url=https://lx1me.github.io/2025/06/05/MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/06/05/DevOps%20%E4%B9%8B%20CICD%20%E6%9C%8D%E5%8A%A1%E5%99%A8%20Jenkins/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info"></div></div></a></div><div class="next-post pull-right"><a href="/2025/06/05/MySQL%20%E6%95%B0%E6%8D%AE%E5%BA%93-1/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info"></div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">MySQL 数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#title-MySQL-%E6%95%B0%E6%8D%AE%E5%BA%93date-2025-06-05-12-00-00categories-%E6%95%B0%E6%8D%AE%E5%BA%93-tags-MySQL-%E6%95%B0%E6%8D%AE%E5%88%86%E7%B1%BB-description-MySQL-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%86%E7%B1%BB%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.1.</span> <span class="toc-text">title: MySQL 数据库date: 2025-06-05 12:00:00categories: [数据库]tags: [MySQL, 数据分类]description: MySQL 数据库中数据的分类概述与示例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">数据的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ER%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.3.</span> <span class="toc-text">ER模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E7%BB%93%E6%9E%84%E5%8C%96%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80"><span class="toc-number">1.4.</span> <span class="toc-text">SQL 结构化查询语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-%E5%AE%89%E8%A3%85%E5%92%8C%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.5.</span> <span class="toc-text">MySQL 安装和基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL-%E8%BD%AF%E4%BB%B6"><span class="toc-number">1.5.1.</span> <span class="toc-text">MySQL 软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL-%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F"><span class="toc-number">1.5.2.</span> <span class="toc-text">MySQL 安装方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mariadb%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F"><span class="toc-number">1.5.3.</span> <span class="toc-text">mariadb安装方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-%E5%A4%9A%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.6.</span> <span class="toc-text">MySQL 多实例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%9A%E5%AE%9E%E4%BE%8B"><span class="toc-number">1.6.1.</span> <span class="toc-text">数据库多实例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-%E7%BB%84%E6%88%90%E5%92%8C%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7"><span class="toc-number">1.7.</span> <span class="toc-text">MySQL 组成和常用工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%93%8D%E4%BD%9C"><span class="toc-number">1.8.</span> <span class="toc-text">MySQL 命令行操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL-%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7"><span class="toc-number">1.8.1.</span> <span class="toc-text">MySQL****命令行工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%91%BD%E4%BB%A4"><span class="toc-number">1.9.</span> <span class="toc-text">mysql客户端命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysqladmin"><span class="toc-number">1.10.</span> <span class="toc-text">mysqladmin</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#mysqladmin-%E5%8F%AA%E8%83%BD%E5%85%B3%E9%97%AD%E6%9C%8D%E5%8A%A1%EF%BC%8C%E4%B8%8D%E8%83%BD%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.10.0.0.1.</span> <span class="toc-text">mysqladmin 只能关闭服务，不能启动服务</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#mysqladmin-shutdown"><span class="toc-number">1.10.0.0.2.</span> <span class="toc-text">mysqladmin shutdown</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E8%AF%AD%E8%A8%80"><span class="toc-number">1.11.</span> <span class="toc-text">SQL 语言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.12.</span> <span class="toc-text">SQL 语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E7%AE%80%E4%BB%8B"><span class="toc-number">1.12.0.1.</span> <span class="toc-text">类型简介</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.13.</span> <span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">1.13.0.1.</span> <span class="toc-text">修饰符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E6%89%80%E6%94%AF%E6%8C%81%E7%9A%84%E5%BC%95%E6%93%8E"><span class="toc-number">1.13.0.2.</span> <span class="toc-text">查看表所支持的引擎</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">1.13.0.3.</span> <span class="toc-text">修改表结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E9%BB%98%E8%AE%A4%E5%80%BC%E4%BF%AE%E6%94%B9"><span class="toc-number">1.13.0.4.</span> <span class="toc-text">字段默认值修改</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE%E7%9A%84%E5%A2%9E%E5%88%A0"><span class="toc-number">1.13.1.</span> <span class="toc-text">主键的增删</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%87%AA%E5%A2%9Eid%E7%9A%84%E8%B5%B7%E5%A7%8B%E5%80%BC"><span class="toc-number">1.13.2.</span> <span class="toc-text">查看自增id的起始值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%9A%84%E7%A7%BB%E9%99%A4"><span class="toc-number">1.13.2.1.</span> <span class="toc-text">表的移除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.14.</span> <span class="toc-text">DML 语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.14.0.1.</span> <span class="toc-text">插入数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8Eselect%E6%96%B9%E5%BC%8F%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.14.0.2.</span> <span class="toc-text">基于select方式插入数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E4%BA%8ENUll%E7%9A%84%E7%A9%BA%E5%80%BC%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD%EF%BC%8C%E8%A6%81%E4%BD%BF%E7%94%A8-IS-NULL%EF%BC%8C%E5%90%A6%E5%88%99%E4%BC%9A%E5%AF%BC%E8%87%B4%E5%A4%B1%E8%B4%A5"><span class="toc-number">1.14.0.2.1.</span> <span class="toc-text">对于NUll的空值条件判断，要使用 IS NULL，否则会导致失败</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">1.14.1.</span> <span class="toc-text">删除数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B8%85%E7%A9%BA%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">1.14.2.</span> <span class="toc-text">清空表数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.15.</span> <span class="toc-text">DQL语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DQL-%E8%AF%AD%E5%8F%A5%E8%BF%9B%E9%98%B6"><span class="toc-number">1.15.1.</span> <span class="toc-text">DQL 语句进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%9C%A8%E4%B8%8E%E5%90%A6%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.15.1.1.</span> <span class="toc-text">存在与否子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.15.1.2.</span> <span class="toc-text">联合查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E5%8F%89%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.15.1.3.</span> <span class="toc-text">交叉连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E9%93%BE%E6%8E%A5"><span class="toc-number">1.15.1.4.</span> <span class="toc-text">内链接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E7%84%B6%E9%93%BE%E6%8E%A5"><span class="toc-number">1.15.1.5.</span> <span class="toc-text">自然链接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.15.1.6.</span> <span class="toc-text">外连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.15.1.7.</span> <span class="toc-text">自连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E6%B3%A8%E5%85%A5"><span class="toc-number">1.15.2.</span> <span class="toc-text">SQL注入</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E9%AB%98%E9%98%B6%E8%AF%AD%E6%B3%95"><span class="toc-number">1.16.</span> <span class="toc-text">SQL高阶语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">1.17.</span> <span class="toc-text">环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.18.</span> <span class="toc-text">存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.18.0.1.</span> <span class="toc-text">存储过程与自定义函数的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E8%AF%AD%E6%B3%95"><span class="toc-number">1.18.0.2.</span> <span class="toc-text">存储过程语法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6"><span class="toc-number">1.18.1.</span> <span class="toc-text">流程控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">1.18.1.1.</span> <span class="toc-text">触发器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E8%B0%83%E5%BA%A6%E5%99%A8"><span class="toc-number">1.18.2.</span> <span class="toc-text">事件调度器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">1.19.</span> <span class="toc-text">事件管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">1.19.1.</span> <span class="toc-text">用户管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%86%E7%A0%81%E4%BF%A1%E6%81%AF"><span class="toc-number">1.19.2.</span> <span class="toc-text">密码信息</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/05/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E6%8A%80%E6%9C%AF%E5%9F%BA%E7%A1%80/" title="No title">No title</a><time datetime="2025-06-05T01:52:55.118Z" title="Created 2025-06-05 09:52:55">2025-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/05/%E4%BC%81%E4%B8%9A%E7%BA%A7%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%20ZABBIX/" title="No title">No title</a><time datetime="2025-06-05T01:52:55.113Z" title="Created 2025-06-05 09:52:55">2025-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/05/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF%20Docker/" title="No title">No title</a><time datetime="2025-06-05T01:52:55.113Z" title="Created 2025-06-05 09:52:55">2025-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/05/%E4%BC%81%E4%B8%9A%E7%BA%A7%E5%A0%A1%E5%9E%92%E6%9C%BA%20JumpServer/" title="No title">No title</a><time datetime="2025-06-05T01:52:55.108Z" title="Created 2025-06-05 09:52:55">2025-06-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/05/%E4%BC%81%E4%B8%9A%E7%BA%A7%E8%B0%83%E5%BA%A6%E5%99%A8LVS/" title="No title">No title</a><time datetime="2025-06-05T01:52:55.108Z" title="Created 2025-06-05 09:52:55">2025-06-05</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="John Doe" target="_blank">John Doe</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">13</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">0</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 John Doe 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>